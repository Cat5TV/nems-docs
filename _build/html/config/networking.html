
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Network Configuration &#8212; NEMS Linux Documentation 1.6 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Gmail SMTP For Nagios Notification Sending" href="smtp_config_gmail.html" />
    <link rel="prev" title="NEMS Commands and Special Features" href="../commands/index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="network-configuration">
<h1>Network Configuration<a class="headerlink" href="#network-configuration" title="Permalink to this headline">¶</a></h1>
<p>NEMS Linux requires an Internet connection to obtain updates and
patches,
to tap into <a class="reference external" href="../nems-cloud-services/index.html">NEMS Cloud Services</a> features such as <a class="reference external" href="../nems-cloud-services/checkin.html">NEMS CheckIn</a>, <a class="reference external" href="../nems-cloud-services/nems-migrator.html">NEMS
Migrator Off-Site Backup</a>, and <a class="reference external" href="../misc/anonymousstats.html">NEMS Anonymous Stats</a>, and to <a class="reference external" href="../notifications/index.html">send
notifications</a>.</p>
<p><strong>You cannot use NEMS Linux without an Internet connection.</strong></p>
<div class="warning admonition">
<p class="first admonition-title">Security Notice</p>
<p class="last">NEMS Linux is intended to be accessible only to your trusted admin
team. <span class="underline">Never</span> open ports to the world. Rather, specifically allow
your admin IP address(es) access to the needed resources, or use
a VPN.</p>
</div>
<div class="section" id="firewall-ports">
<h2>Firewall Ports<a class="headerlink" href="#firewall-ports" title="Permalink to this headline">¶</a></h2>
<p>To allow you/others to access your NEMS Server from outside your LAN,
you will require the following ports be opened to your NEMS Server:</p>
<ul class="simple">
<li><strong>SSH Access:</strong>&nbsp;<cite>22 TCP In</cite></li>
<li><strong>NEMS Dashboard Web Interface / nems-api:</strong>
<cite>80, 443 TCP In</cite></li>
<li><strong>NEMS Tools GPIO Extender:</strong> <cite>9595 TCP In</cite></li>
<li><strong>Monit Service Monitor Web Access:</strong>&nbsp;<cite>2812 TCP In</cite></li>
<li><strong>Cockpit Admin Interface:</strong>&nbsp;<cite>9090 TCP In</cite></li>
<li><strong>AVAHI / mDNS Name Resolution:</strong>&nbsp;<cite>548, 5353, 5354 TCP In/Out</cite></li>
</ul>
<p>Most standard network configurations allow servers to
communicate with the outside world without any additional setup.
However, if you have a very restrictive firewall configuration, you may
need to open additional ports for your NEMS Server to be able to
communicate with systems it is monitoring, as well as the NEMS Update
servers.</p>
<ul class="simple">
<li><strong>NEMS Update:</strong>&nbsp;80, 443, 9418 TCP Out</li>
<li><strong>NRPE Check Commands:</strong>&nbsp;5666, 12489 TCP Out</li>
<li><strong>WMI Check Commands:</strong>&nbsp;135, 445, 1024-1034 Out</li>
</ul>
<p>You must also ensure your NEMS Server is allowed to communicate with the
following TLDs:</p>
<ul class="simple">
<li>*.nemslinux.com</li>
<li>*.github.com</li>
</ul>
</div>
<div class="section" id="how-to-configure-networking-on-nems-linux">
<h2>How to Configure Networking on NEMS Linux<a class="headerlink" href="#how-to-configure-networking-on-nems-linux" title="Permalink to this headline">¶</a></h2>
<p>NEMS Linux includes the <a class="reference external" href="../apps/cockpit.html">Cockpit</a> administrative
front-end. With some exceptions (listed below)
you will only use this interface to configure your networking on a
NEMS Linux server.</p>
<p>Setting up your networking by any other means (E.G., a general Linux
networking tutorial, modifying system files, or using third-party tools)
may result in your NEMS Server’s network stack being broken, and so
is strongly discouraged. Should you ignore this warning and break your
NEMS Server, re-flash NEMS Linux and import your
<a class="reference external" href="../apps/nems-migrator.html">NEMS Migrator Backup</a> to recover.</p>
</div>
<div class="section" id="docker-amazon-web-services">
<h2>Docker / Amazon Web Services<a class="headerlink" href="#docker-amazon-web-services" title="Permalink to this headline">¶</a></h2>
<p>Network setup for NEMS Linux on Docker and Amazon Web Services is
administered from the host, not the appliance. In these environments,
Cockpit is not used to configure the network, and you must familiarize
yourself with the host platform’s configuration options.</p>
<ul class="simple">
<li><strong>Docker:</strong> You must assign the IP upon launching the container.
See&nbsp;<a class="reference external" href="https://docs.docker.com/engine/reference/run/#network-settings">Docker documentation</a>.</li>
<li><strong>Amazon Web Services:</strong> You must assign an Elastic IP to your NEMS Linux
instance.
See&nbsp;<a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html">Amazon Web Services documentation</a>.</li>
</ul>
</div>
<div class="section" id="important-notes">
<h2>Important Notes<a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>When logging in to Cockpit, make sure you check the box “Reuse my
password for privileged tasks” otherwise none of these options will
be available to you. See <a class="reference external" href="../apps/cockpit.html">here</a>.</li>
<li>You’ll find Cockpit in the System menu of your NEMS Dashboard. For
more details about Cockpit, <a class="reference external" href="../apps/cockpit.html">read the
documentation</a>.</li>
<li>Network configuration does not persist from board to board: if you
configure NEMS on one device and then move its storage (E.G., SD card)
to a different device, the new device will revert to the default
setting of DHCP.</li>
</ol>
</div>
<div class="section" id="network-interfaces">
<h2>Network Interfaces<a class="headerlink" href="#network-interfaces" title="Permalink to this headline">¶</a></h2>
<p>NEMS Linux will enable any connected Interface it detects on boot.</p>
<div class="section" id="ethernet-interface">
<h3>Ethernet Interface<a class="headerlink" href="#ethernet-interface" title="Permalink to this headline">¶</a></h3>
<p>Recommended. Simply plug in the cable.</p>
</div>
<div class="section" id="wireless-network-interface">
<h3>Wireless Network Interface<a class="headerlink" href="#wireless-network-interface" title="Permalink to this headline">¶</a></h3>
<p>Because of the very nature of NEMS, the possible reliability issues
on WiFi, and the fact that a WiFi connection will likely result in false
notifications, it is <span class="underline">not recommended</span> to run your NEMS server
on a WiFi connection. However, this may be the only option in some
environments, and so great effort has gone into ensuring it will work
as well as possible.</p>
<p>Examples where NEMS Linux will be hindered by a WiFi connection:</p>
<ul class="simple">
<li>User has Gigabit Internet. WiFi connection is 54 Mb/sec. User wants a
notification if the Internet ever drops below 200 Mb/sec, but this is
impossible since the WiFi connection is <em>always</em> below 200 Mb/sec.</li>
<li>While perhaps untrue for the average home user, an enterprise WiFi
connection, if configured securely, should never have access to particular
resources on the network. For example, at the Category5 TV studio,
WiFi can access the Internet, but not the server. Therefore a NEMS
Server in this environment would not be able to monitor items such as
server disk space.</li>
<li>User’s WiFi occasionally drops connection, which could result in false
notifications that the Internet is down, or cause
<a class="reference external" href="../nems-cloud-services/checkin.html">NEMS CheckIn</a> to lose
contact with the NEMS Server, resulting in yet more false notifications.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>Raspberry Pi users:</strong>&nbsp;<span class="underline">Do not</span>&nbsp;use <cite>raspi-config</cite> for your WiFi.</p>
</div>
<p><strong>Enable the WiFi Radio in NEMS Linux</strong></p>
<p>In order to be able to activate/deactivate your WiFi connection in
Cockpit, you must first add the connection information to your NEMS
Linux server using the terminal. If you do not, you’ll receive an error
“A ‘wireless’ setting is required if no AP path was given.” when trying
to activate WiFi.</p>
<p>Determine if your WiFi radio is enabled or disabled:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">sudo nmcli radio wifi</span>
</pre></div>
</div>
<p>If it is disabled, enable it:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">sudo nmcli radio wifi on</span>
</pre></div>
</div>
<p>Scan for available wireless networks:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">sudo nmcli device wifi list</span>
</pre></div>
</div>
<p>Determine which is the one you wish to connect to and enter the
following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">nmcli device wifi connect [SSID] password [password]</span>
</pre></div>
</div>
<p>Eg., if your network SSID is MyWiFi and your WiFi password is MyPass123,
the command would look like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">nmcli device wifi connect MyWiFi password MyPass123</span>
</pre></div>
</div>
<p>Now, you can enable or disable your wireless connection within
Cockpit→Networking.</p>
</div>
</div>
<div class="section" id="ip-address-dns-settings">
<h2>IP Address/DNS Settings<a class="headerlink" href="#ip-address-dns-settings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dhcp-assigned-ip-address">
<h3>DHCP Assigned IP Address<a class="headerlink" href="#dhcp-assigned-ip-address" title="Permalink to this headline">¶</a></h3>
<p>By default, NEMS Linux will obtain its network settings from your DHCP
server. For this reason, a quick and easy way to set a static IP on your
NEMS server would be to add it as a DHCP reservation within your
router/DHCP server. To find out what IP address your NEMS server resides
on, either check your DHCP pool, or connect a TV to your NEMS server.
You can also try accessing it
at&nbsp;<code class="docutils literal"><span class="pre">https://nems.local</span></code>&nbsp;from another computer on the same network and
then open <a class="reference external" href="../apps/serveroverview.html">NEMS Server Overview</a> to see
your IP.</p>
</div>
<div class="section" id="static-ip-address">
<h3>Static IP Address<a class="headerlink" href="#static-ip-address" title="Permalink to this headline">¶</a></h3>
<p>If your NEMS server is already initialized, it is recommended that you
copy <a class="reference external" href="../apps/nems-migrator.html">your&nbsp;backup.nems</a>&nbsp;to a different
system prior to setting a static
IP address. This gives you an easy way to recover should you
accidentally lock yourself out of your NEMS server by breaking the
network configuration.</p>
<p>When setting a static IP address, it is important to make sure it is
outside your DHCP pool. Otherwise, some routers/DHCP servers may assign
the IP to a second device, causing all kinds of unforeseen issues.</p>
<p><strong>Set a static IP Address in NEMS Linux</strong></p>
<ol class="arabic simple">
<li>Open <a class="reference external" href="../apps/cockpit.html">Cockpit</a>.</li>
<li>Login. Use the default credentials if you have not initialized NEMS,
or your created credentials if you have. Check the box “Reuse my
password for privileged tasks” while signing in.</li>
<li>Click “Networking”.</li>
<li>Click the network interface (E.G., eth0).</li>
<li>Ensure “Connect automatically” is checked.</li>
<li>Click the “Automatic (DHCP)” or IP address currently assigned to
this NIC next to IPv4.</li>
<li>Ensure “Manual” is selected in the dropdown.</li>
<li>Add your new IP settings.</li>
<li>Make sure you click the + next to&nbsp;DNS&nbsp;settings and assign at least
one&nbsp;DNS&nbsp;server. 8.8.8.8 (Google) or 1.1.1.1 (Cloudflare) will do.</li>
<li>Press “Apply” and wait for it to test the connection.</li>
<li>Click “Change the setting” after the test is complete.</li>
<li>You should now open your NEMS Dasboard at the new IP address. Within
a few moments, the old one will stop working.</li>
</ol>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Network Configuration</a><ul>
<li><a class="reference internal" href="#firewall-ports">Firewall Ports</a></li>
<li><a class="reference internal" href="#how-to-configure-networking-on-nems-linux">How to Configure Networking on NEMS Linux</a></li>
<li><a class="reference internal" href="#docker-amazon-web-services">Docker / Amazon Web Services</a></li>
<li><a class="reference internal" href="#important-notes">Important Notes</a></li>
<li><a class="reference internal" href="#network-interfaces">Network Interfaces</a><ul>
<li><a class="reference internal" href="#ethernet-interface">Ethernet Interface</a></li>
<li><a class="reference internal" href="#wireless-network-interface">Wireless Network Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ip-address-dns-settings">IP Address/DNS Settings</a><ul>
<li><a class="reference internal" href="#dhcp-assigned-ip-address">DHCP Assigned IP Address</a></li>
<li><a class="reference internal" href="#static-ip-address">Static IP Address</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../commands/index.html" title="previous chapter">NEMS Commands and Special Features</a></li>
      <li>Next: <a href="smtp_config_gmail.html" title="next chapter">Using Gmail SMTP For Nagios Notification Sending</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/config/networking.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Category5 TV Network.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../_sources/config/networking.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>