
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>NEMS Linux 1.2 Changelog &#8212; NEMS Linux Documentation 1.6 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NEMS Linux 1.1 Changelog" href="1.1.html" />
    <link rel="prev" title="NEMS Linux 1.5 Changelogs" href="1.5.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="nems-linux-1-2-changelog">
<h1>NEMS Linux 1.2 Changelog<a class="headerlink" href="#nems-linux-1-2-changelog" title="Permalink to this headline">¬∂</a></h1>
<p>NEMS Linux 1.2 was released May 6, 2017. NEMS Linux 1.2.1 was released May 22, 2017 to fix bugs with the migrator and improve the overall release following significant user feedback. NEMS 1.2.x was discontinued November 7, 2017. This version of NEMS was downloaded 14,765 times during its 6 month life cycle.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A great emphasis was placed on documentation during the 1.2 Release Cycle. I launched <a class="reference external" href="https://forum.nemslinux.com/">the Community Forum</a> to offset the massive onslaught of user comments on the NEMS page of my blog, and <a class="reference external" href="https://docs.nemslinux.com/">NEMS Documentation</a>.</p>
</div>
<div class="section" id="nems-linux-1-2-1-changelog">
<h2>NEMS Linux 1.2.1 Changelog<a class="headerlink" href="#nems-linux-1-2-1-changelog" title="Permalink to this headline">¬∂</a></h2>
<p>Here is a list of the changes I recorded during development.</p>
<ul class="simple">
<li>NEMS Linux now requires you to run nems-init when you first deploy. This tool takes care of some of those ‚Äúfirst boot‚Äù prerequisites like setting passwords and expanding your filesystem.</li>
<li>Underlying OS upgraded to Raspbian Stretch.</li>
<li>Kernel upgraded to 4.9.28.</li>
<li>PHP upgraded to 7.0.19.</li>
<li><a class="reference external" href="https://github.com/Cat5TV/nconf/">Reworking of nConf</a> to make compatible with modern software (ie. PHP7.0, mySQLi).</li>
<li>Maintenance and info scripts moved to /home/pi/nems-scripts.</li>
<li>NEMS Linux MOTD upon login now shows local IP address. Also improved how it determines some of the info (see <a class="reference external" href="https://github.com/Cat5TV/nems-scripts/blob/master/info.sh">info.sh in nems-scripts</a>) and fixes a few bugs. Also set it up to rollover to wlan0 if no response on eth0, in case the user is on wifi.</li>
<li>Temporary files and Monitorix image cache moved to RAM.</li>
<li>Added <a href="#id1"><span class="problematic" id="id2">`RPi-Monitor &lt;http://elinux.org/RPi-Monitor`__</span></a> as per <a class="reference external" href="http://www.baldnerd.com/nems/comment-page-1/#comment-102086">Hesh‚Äôs comment</a>. Reworked the Memory and CPU Frequency modules to correct the accuracy.</li>
<li>Added <a class="reference external" href="https://github.com/zorkian/nagios-api">nagios-api</a> (JSON on Port 8090) as per <a class="reference external" href="http://www.baldnerd.com/nems/#comment-118462">Timothy Seibert‚Äôs request</a>. <a class="reference external" href="https://github.com/zorkian/nagios-api/blob/master/LICENCE">License</a></li>
<li>Added Webmin as per <a class="reference external" href="http://www.baldnerd.com/nems/comment-page-1/#comment-104813">Hesh‚Äôs comment</a>. Login as pi user with the password you created when initializing NEMS Linux with the nems-init program.</li>
<li>Added support for agentless Windows checks using WMI (big thanks to <a class="reference external" href="http://everyday-tech.com/">Ryan Siegel</a> who originally authored NagiosPi and pitched in for NEMS Linux 1.2 release).</li>
<li>Changed Apache log rotation to weekly (was previously daily).</li>
<li>Upgraded nagvis to 1.9b16.</li>
<li>Fixed sendemail paths in nConf to ease out-of-the-box email notifications (as they should just work now). Thanks so much to <a class="reference external" href="http://www.baldnerd.com/nems/comment-page-3/#comment-115806">Jim for pointing this typo out</a>!</li>
<li>Enabled CPU governing (package cpufrequtils). On NEMS Linux 1.0-1.1, NEMS Linux was locked to 600MHz, but now it will automatically go up to 1200 MHz as needed.</li>
<li>force resolver to generate new DNS resolv.conf at first boot (to ensure the detected DNS servers will be used rather than our development DNS servers which may not work for you).</li>
<li>NEMS Linux Migrator upgraded to allow direct migration from nagiospi to NEMS Linux.</li>
<li>Added Monitorix 3.9.0.</li>
<li>Removed MySQL, replaced with MariaDB 10.1.22.</li>
<li>Improve quality of Monitorix graphs used on NEMS Linux Dashboard slideshow.</li>
<li>Minor improvements to Monitorix page based on priority of service and image quality.</li>
<li>Removed some old (obsolete) kernel modules, InnoDB logs and other bloat to reduce size of stock image.</li>
<li>Added /var/www/nconf/temp to tmpfs. This way if someone breaks their nCONF (eg., pressing ‚ÄúBack‚Äù while generating config) they can just reboot to fix it üòÄ</li>
<li>nems-init and nems-migrator restore significantly reworked to correct initialization bugs from NEMS Linux 1.2. Now, both initialization of a new NEMS Linux deployment and an import from an old one should work without a hitch.</li>
<li>nConf and NEMS Linux-Migrator backups now require your password (as set with nems-init).</li>
<li>NEMS Linux-Migrator no longer replaces the MySQL database with backup. Instead, it now clears the database completely, reconciles your backup with the current set of available commands and services and then imports everything together into the fresh database and activates the hosts. This way, if you restore your NEMS Linux 1.1 settings to NEMS Linux 1.2.1, you don‚Äôt miss out on all the WMIC features (which your 1.1 backup would overwrite), for example.</li>
<li>Documentation updated to reflect changes in commands and versioning.</li>
<li>I built a quick but lovely interface for Monitorix to make it mobile responsive and a little more dynamic in its functionality.</li>
<li>Distribution now available via BitTorrent (thanks to our partnership with <a class="reference external" href="https://category5.tv/">The Category5 TV Network</a>.</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li>number of online users count on MOTD fixed.</li>
<li>undefined constant in apache error log every 5 minutes leading to a bloated error log.</li>
<li>added missing icons in check_mk.</li>
<li>NEMS Linux Migrator mail settings fixed when importing backup.nems from NEMS Linux 1.0/nagiospi.</li>
<li>Fixed MySQL Initialization Bug - was causing NEMS Linux to lose configuration and no longer work.</li>
<li>Wifi (wlan0) restored after it broken in 1.2 (due to Debian Stretch upgrade and incompatible firmwares for the Pi).</li>
<li>Fixed nems-init user creation. In NEMS Linux 1.2 it was not adding the new user to the ‚Äúadmin‚Äù group correctly in NEMS Linux nCONF, so upon config generation, user would lose access to Nagios Core and other features requiring admin user.</li>
<li>many miscellaneous bug fixes.</li>
</ul>
</div>
<div class="section" id="rolling-updates-nems-linux-1-2-2-changelog">
<h2>Rolling Updates - NEMS Linux 1.2.2 Changelog<a class="headerlink" href="#rolling-updates-nems-linux-1-2-2-changelog" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li>Created rolling fixes system to automatically patch NEMS Linux systems as needed.</li>
<li>Monitorix cronjob now detects which network connection is being used (ie., eth0/wlan0) and begins monitoring the correct one if it changes. Requires NEMS Linux 1.2.1 or higher.</li>
<li>NEMS Linux Migrator updated to fix bug in host presets. Was causing these two errors: ‚Äú[ERROR] Failed to get host-alive check for host ‚ÄòNEMS Linux‚Äô. Make sure the host is linked with a host-preset. Aborting.‚Äù and ‚ÄúError: Cannot open main configuration file ‚Äò/var/www/html/nconf/temp/test/Default_collector.cfg‚Äô for reading!‚Äù - Thanks to Rick for giving me access to his affected system so I could fix this. Requires NEMS Linux 1.2.1 or higher.</li>
<li>NEMS Linux web interface has been updated to git repository so I can fix issues with it on the fly without forcing users to reinstall. Requires NEMS Linux 1.2.2 or higher.</li>
<li>Monitorix graphs clear when rebooting the Pi. This is by design. However, they were meant to regenerate upon boot. <a class="reference external" href="http://www.baldnerd.com/nems/#comment-120711">Hesh found a bug</a> that was causing the graphs not to generate since the service was not yet loaded. I rewrote the back-end to wait for a network connection, and for the service to respond, before moving on. Requires NEMS Linux 1.2.1 or higher.</li>
<li>MOTD was displaying the disk usage as what was being used in the home folder. I realized this was absolutely pointless information, so rewrote this section to instead tell you the current % usage of your entire SD card (/dev/root). Requires NEMS Linux 1.2.2 or higher.</li>
<li>NEMS Linux-Init bug fixed: new user is not authorized_for_system_information, authorized_for_all_hosts, authorized_for_configuration_information, authorized_for_system_commands ‚Ä¶ and so-on. <a class="reference external" href="https://github.com/Cat5TV/nems-scripts/commit/84e99546b02de3a76fbc4ae044f695f9fb9306a5">Wrote this into nems-init</a>. Had caused users to not have access to all screens in Nagios Core. Also <a class="reference external" href="https://github.com/Cat5TV/nems-migrator/commit/428e0ae4726c3aa3df309f5ed9c9fa2bca1f6529">added the config to the NEMS Linux Migrator backup</a>. I also <a class="reference external" href="https://github.com/Cat5TV/nems-scripts/commit/493519676236aafffa87536cc9163973503be6a1">added the patch to fixes.sh</a> so users don‚Äôt have to re-initialize to get the fix. It will retroactively fix the file, automatically. Requires NEMS Linux 1.2.1 or higher.</li>
<li>Check_MK Multisite reports ‚Äúuser not found‚Äù on some screens. Similar issue to what was happening with Nagios Core: nems-init user was not being migrated correctly to Check_MK as pointed out by Rick. This has been fixed <a class="reference external" href="https://github.com/Cat5TV/nems-scripts/commit/dcd010e9c9085dcbb206a02a06a5946a310bf338">and a retroactive patch added</a> to correct existing deployments. Requires NEMS Linux 1.2.1 or higher.</li>
<li>Updated nems-migrator to support NEMS Linux 1.2.2. Built nems-upgrade, which will roll NEMS Linux 1.2.1 up to NEMS Linux 1.2.2 without needing to reinstall. You can do this (backup first please) by typing: sudo nems-upgrade</li>
<li>Email notification service changed to automatically detect TLS. Changes will take effect immediately for new deployments, but if yours is already deployed (before June 9, 2017) please add the following to your service definitions in NEMS Linux-nConf for notify-host-by-email and notify-service-by-email: -o tls=auto - add it immediately after /usr/bin/sendemail so it looks like this: /usr/bin/sendemail -o tls=auto -s $USER7$ ‚Ä¶.</li>
<li>Created <cite>nems-benchmark</cite> and <cite>nems-mailtest</cite>.</li>
<li>Disabled swapfile.</li>
<li>Add keyboard locale setting to nems-init. <a class="reference external" href="https://www.baldnerd.com/nems/#comment-121269">As per Steve</a>.</li>
<li>Force more secure bcrypt encryption on htpasswd generation. <a class="reference external" href="https://www.baldnerd.com/nems/#comment-121269">As per Steve</a>.</li>
</ul>
</div>
<div class="section" id="rolling-updates-nems-linux-1-2-3-changelog">
<h2>Rolling Updates - NEMS Linux 1.2.3 Changelog<a class="headerlink" href="#rolling-updates-nems-linux-1-2-3-changelog" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li>Removed dead ‚Äúhelp‚Äù links in Nagios Core <a class="reference external" href="http://forum.category5.tv/thread-63.html">as per kd4pyr</a>.</li>
<li>Secure Connectivity <a class="reference external" href="https://www.baldnerd.com/nems/#comment-121269">as per Steve</a>:
* nems-init now creates self-signed server, client and CA certificates during initialization of NEMS Linux.
* SSL (https) access now available on most NEMS Linux features, using your new custom certs.</li>
<li>Add anonymous stats logging retroactively to NEMS Linux 1.2.1+.</li>
<li>Create log file at /var/log/nems/package-versions.log which shows specific package version information for some of the essential services in NEMS Linux. This log will be recreated every Sunday morning.</li>
<li>Add <cite>nems-info</cite> command.</li>
<li>Early introduction of PHP connector for Monitorix data, which will be utilized both by <cite>nems-www</cite> and <cite>nems-info</cite>.</li>
<li>Added command-line option <cite>temperature</cite> to <cite>nems-info</cite>.</li>
<li>Added average temperature to NEMS Anonymous Stats.</li>
<li>WiFi patched against KRACK exploit for users connecting NEMS to the network using WPA2. To see if yours has been patched type <cite>cat /var/log/nems/wpasupplicant</cite> - it will either say <em>Patched</em>, or give an error. This patch is retroactive to all NEMS 1.2.x devices, and higher.</li>
<li>Moved NEMS symlinks to /usr/local/bin to avoid loss after a dist-upgrade. Does not affect functionality: this is only an internal change in preparation for NEMS 1.3 which is transparent to the end user since both are in the path (you type <cite>nems-init</cite> not <cite>/usr/local/bin/nems-init</cite> for example).</li>
<li>Move nems.conf to /usr/local/share/nems/ in preparation for the deprecation of the <em>pi</em> user.</li>
<li>NEMS 1.3 released. NEMS 1.2.x is now Old Stable. I‚Äôll continue to support it until I see its usage numbers drop in the <a class="reference external" href="https://nemslinux.com/stats/">anonymous stats</a>.</li>
<li>Patched NEMS 1.2.x to support the new file locations of NEMS 1.3. This fixes ‚Äúfile not found‚Äù issues in nems-update and Anonymous Stats as <a class="reference external" href="https://forum.category5.tv/thread-101.html">reported by Digithead</a>.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">NEMS Linux 1.2 Changelog</a><ul>
<li><a class="reference internal" href="#nems-linux-1-2-1-changelog">NEMS Linux 1.2.1 Changelog</a></li>
<li><a class="reference internal" href="#bug-fixes">Bug fixes</a></li>
<li><a class="reference internal" href="#rolling-updates-nems-linux-1-2-2-changelog">Rolling Updates - NEMS Linux 1.2.2 Changelog</a></li>
<li><a class="reference internal" href="#rolling-updates-nems-linux-1-2-3-changelog">Rolling Updates - NEMS Linux 1.2.3 Changelog</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="1.5.html" title="previous chapter">NEMS Linux 1.5 Changelogs</a></li>
      <li>Next: <a href="1.1.html" title="next chapter">NEMS Linux 1.1 Changelog</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/changelogs/1.2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Category5 TV Network.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../_sources/changelogs/1.2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>