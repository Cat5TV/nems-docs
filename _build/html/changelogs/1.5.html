
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>NEMS Linux 1.5 Changelogs &#8212; NEMS Linux Documentation 1.6 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NEMS Linux 1.2 Changelog" href="1.2.html" />
    <link rel="prev" title="NEMS Linux 1.6 Changelogs" href="1.6.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="nems-linux-1-5-changelogs">
<h1>NEMS Linux 1.5 Changelogs<a class="headerlink" href="#nems-linux-1-5-changelogs" title="Permalink to this headline">¶</a></h1>
<p>The NEMS 1.5 release cycle will focus on an enhanced user experience and
documentation.</p>
<p>On September 22, 2019, NEMS Linux 1.5.1 was released.</p>
<p>NEMS Linux 1.5.2 was released June 1, 2020, introducing support for the
Raspberry Pi 4B 8GB SBC.</p>
<p><strong>Key Development Features and Goals:</strong></p>
<ul class="simple">
<li>Nagios upgraded to latest current core.</li>
<li>HTML email notifications.</li>
<li>Admin contacted if NEMS is offline (via API check-in).</li>
<li>New plugins and check_commands integrated based on community
requests.</li>
<li>Documentation at the checkcommands level improved, along with other
step-by-step guides added to the documentation.</li>
<li>Bring support for industrial PCs such as the CL100 and FitLet2.</li>
<li>Create a Virtual Appliance.</li>
<li>Upgrade base to Debian Buster.</li>
<li>Upgrade PHP to 7.3.</li>
</ul>
<p><strong>Supported Platforms</strong></p>
<ul class="simple">
<li><a class="reference external" href="https://nemslinux.com/download/nagios-for-odroid.php">ODROID</a><ul>
<li>XU4<ul>
<li><strong>Release Date:</strong> February 12, 2019 (Patrons: February 7, 2019)</li>
<li>Runs at a reduced frequency of 1.3 GHz. This provides the best
balance of high performance, low temperature and ongoing
stability.</li>
<li>NEMS Linux 1.5 for ODROID XU4 supports SD or eMMC deployment.
eMMC must have a current U-Boot.</li>
<li>The ODROID XU4 image will run on XU3, XU4, HC1, HC2 and MC1
hardware. However, it has only been officially tested on the
XU4.</li>
</ul>
</li>
<li>C2<ul>
<li><strong>Release Date:</strong> April 15, 2019 (Patrons: April 13, 2019)</li>
</ul>
</li>
<li>C0/C1/C1+<ul>
<li><strong>Release Date:</strong> September 1, 2019</li>
</ul>
</li>
<li>N2<ul>
<li><strong>Release Date:</strong> April 15, 2019 (Patrons: March 31, 2019)</li>
</ul>
</li>
<li>ODROID-H2<ul>
<li><strong>Release Date:</strong> TBD (waiting on development unit)</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="https://nemslinux.com/download/nagios-for-raspberry-pi-3.php">Raspberry Pi</a><ul>
<li>All Boards (except Compute Module)<ul>
<li><strong>Release Date:</strong> February 26, 2019 (Patrons: February 9, 2019)</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="https://nemslinux.com/download/nagios-for-pine64.php">PINE64</a><ul>
<li>A64 / A64+<ul>
<li><strong>Release Date:</strong> March 26, 2019 (Patrons: March 23, 2019)</li>
</ul>
</li>
<li>Rock64<ul>
<li><strong>Release Date:</strong> March 26, 2019 (Patrons: March 25, 2019)</li>
</ul>
</li>
<li>A64-LTS<ul>
<li><strong>Release Date:</strong> April 2, 2019 (Patrons: March 29, 2019)</li>
</ul>
</li>
<li>RockPro64<ul>
<li><strong>Release Date:</strong> April 18, 2019 (Patrons: March 30, 2019)</li>
</ul>
</li>
<li>H64 Model B<ul>
<li><strong>Release Date:</strong> TBD (waiting on development unit)</li>
</ul>
</li>
<li>CLUSTERBOARD<ul>
<li><strong>Release Date:</strong> TBD, though should already work with SOPine
release. Testing soon as I have received a test unit.</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="https://khadas.com/">Khadas</a><ul>
<li>VIM3<ul>
<li><strong>Release Date:</strong> July 3, 2019 (Patrons: July 1, 2019)</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="https://nemslinux.com/download/nagios-for-friendlyelec.php">FriendlyElec</a><ul>
<li>NanoPi M4<ul>
<li><strong>Release Date:</strong> April 30, 2019 (Patrons: April 2, 2019)</li>
</ul>
</li>
<li>NanoPi NEO Plus2<ul>
<li><strong>Release Date:</strong> May 14, 2019 (Patrons: May 1, 2019)</li>
</ul>
</li>
<li>NanoPi Fire3-LTS<ul>
<li><strong>Release Date:</strong> TBD, Q4 2019</li>
</ul>
</li>
<li>NanoPC-T4<ul>
<li><strong>Release Date:</strong> TBD (need to purchase development unit)</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="https://nemslinux.com/download/nagios-virtual-appliance.php">Virtual Appliance</a><ul>
<li>OVA / VHD / QCOW2<ul>
<li><strong>Release Date:</strong> March 1, 2019 (Patrons Only)</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="https://nemslinux.com/download/nagios-for-amazon-web-services.php">Amazon Web Services</a><ul>
<li>Community AMI<ul>
<li><strong>Release Date:</strong> August 24, 2019</li>
</ul>
</li>
</ul>
</li>
<li>Docker<ul>
<li><strong>Release Date:</strong> TBD, waiting for Docker support to activate
account and patronage to hit the target goal. Please consider
becoming a Patron or increasing your pledge to help make this
happen.</li>
</ul>
</li>
<li><a class="reference external" href="https://nemslinux.com/download/nagios-for-tinker-board.php">ASUS</a><ul>
<li>Tinker Board, 2 GB / S<ul>
<li><strong>Release Date:</strong> May 8, 2019 (Patrons: April 12, 2019)</li>
<li>Runs at a reduced frequency of 1.2 GHz. This provides the best
balance of high performance, low temperature and ongoing
stability. I was also quite concerned with how hot the SD card
would get at the default frequency of 1.8 GHz.</li>
</ul>
</li>
</ul>
</li>
<li>Orange Pi<ul>
<li>Orange Pi Zero<ul>
<li><strong>Release Date:</strong> April 30, 2019</li>
</ul>
</li>
<li>Orange Pi PC Plus<ul>
<li><strong>Release Date:</strong> TBD, Q4 2019</li>
</ul>
</li>
</ul>
</li>
<li>Atomic Pi<ul>
<li><strong>Release Date:</strong> TBD, Q4 2019</li>
</ul>
</li>
<li>Logic Supply<ul>
<li>CL100<ul>
<li><strong>Release Date:</strong> TBD, Q4 2019</li>
</ul>
</li>
</ul>
</li>
<li>FitPC<ul>
<li>Fitlet2<ul>
<li><strong>Release Date:</strong> TBD, Q4 2019</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>NEMS 1.5 Corporate Sponsors</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://www.rnitsolutions.com/"><img alt="Royal Network IT Solutions" src="../_images/RNIT_Logo_Full_Dark.png" style="width: 200px;" /></a></td>
</tr>
</tbody>
</table>
<p><strong>NEMS 1.5 Patrons</strong></p>
<p>I’d like to thank <em>all</em> of our Patrons for your <a class="reference external" href="https://www.patreon.com/nems">continued support</a> of
NEMS Linux development.</p>
<p>Here is a list of those Patrons who kicked in that little bit extra to
have their name included in the changlogs:</p>
<ul class="simple">
<li>Patrick Kersten</li>
<li>Marc Dörseln</li>
<li>Dave Harman</li>
<li>Bill Marshall</li>
<li>Aaron Tringle</li>
<li>Steve Hudnall</li>
<li>IT Cyber Solutions</li>
<li>Natacha Norman</li>
<li>David Klindt</li>
<li>Wolfgang Friedl</li>
<li>Jeff Conaway</li>
<li>Don Jenkins</li>
<li>Marco Antonini</li>
<li>Jessica K. Litwin</li>
<li>Matthew Mattox</li>
<li>Premium | Fischer-ICT</li>
<li>Steve Thompson</li>
<li>Jiffy</li>
<li>Larry Getz</li>
<li>Coquille Indian Tribe</li>
<li>Jarrod Andrews</li>
<li>Dennis Bailey</li>
<li>Brian Darnell</li>
<li>SystemOfADL</li>
<li>Tony Browne</li>
<li>Steven Beukes</li>
</ul>
<p>Want your name on this list? <a class="reference external" href="https://www.patreon.com/bePatron?c=1348071&amp;rid=2163023">Become a Patron</a></p>
<p>Big thanks also to Heini Holm Andersen for granting me special
permission to use, customize and distribute <a class="reference external" href="https://github.com/heiniha/Nagios-Responsive-HTML-Email-Notifications">Nagios Responsive HTML
Email Notifications Templates</a> as part of NEMS 1.5+.</p>
<p>Also, thanks to <a class="reference external" href="https://twitter.com/BjoernRicks">Björn Ricks</a> from <a class="reference external" href="https://www.greenbone.net/en/">Greenbone Networks</a> for kindly
providing a much more current version of WMI after OpenVAS stopped
supporting it. This new version has become <a class="reference external" href="https://github.com/Cat5TV/nems-wmic">nems-wmic</a> and is
integrated into NEMS Linux 1.5.</p>
<p><strong>Known Issues</strong></p>
<ul class="simple">
<li>While I had wanted to include a pre-configured CSF/LFD firewall with
the release of NEMS Linux 1.5, unfortunately it didn’t make it in on
time: CSF/LFD is not yet compatible with Debian Buster, and so has
been moved to NEMS Linux 1.6.</li>
<li>IMPI check commands will not function yet due to <a class="reference external" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=922404">a bug in
FreeIPMI</a>. The check commands are already in place, so I will push
this out as an update as soon as it is fixed upstream. Until this
time, FreeIMPI and its components have been removed from NEMS Linux.</li>
</ul>
<p><strong>NEMS 1.5 Changelog</strong></p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This changelog is a list of the major
revisions culminated during this NEMS release cycle. To see the full
list of Git commits, please also check out <a class="reference external" href="https://nemslinux.com/changelog/">the web site</a>.</p>
</div>
<p><strong>Initial Release</strong></p>
<p><strong>Software Upgrades</strong></p>
<ul class="simple">
<li>Nagios Core has been upgraded to 4.4.3.</li>
<li>Adagios upgraded to 1.6.3-2, bringing it closer to a complete and
stable modern replacement for Nagios Core’s reporting interface.</li>
<li>Check_MK livestatus socket upgraded from 1.4.0p31 to 1.4.0p37.</li>
<li>PHP upgraded from 7.0 to 7.3, introducing the Sodium cryptography
library for the NEMS 1.5 Cloud Dashboard.</li>
<li>Innumerable system updates of various packages.</li>
<li>WMIC has been forked and upgraded to 4.0.0.</li>
<li>Check WMI Plus upgraded to v1.64.</li>
<li>nagios-plugins 2.2.1 has been removed and replaced with the current
git build of monitoring-plugins.</li>
</ul>
<p><strong>New Check Commands</strong></p>
<ul class="simple">
<li>Cisco SNMP monitoring as <a class="reference external" href="https://forum.category5.tv/thread-341.html">requested by mydogboris</a>:
check_cisco_interface and check_cisco_switch.</li>
<li>IPMI Sensor Monitoring Plugin <a class="reference external" href="http://forum.category5.tv/thread-366.html">as per thegreatadmin</a>:
check_ipmi_sensor_driver_slot, check_ipmi_sensor_fan,
check_ipmi_sensor_memory, check_ipmi_sensor_power_supply,
check_ipmi_sensor_power_unit</li>
<li><a class="reference external" href="../check_commands/check_esxi_hardware.html">check_esxi_hardware</a> <a class="reference external" href="http://forum.category5.tv/thread-337-post-2005.html#pid2005">as per readyit</a>.</li>
<li>check_qnap <a class="reference external" href="http://forum.category5.tv/thread-334.html">as per Toxic</a>.</li>
<li><a class="reference external" href="../check_commands/check_internet_speed.html">check_internet_speed</a> <a class="reference external" href="http://forum.category5.tv/thread-374.html">as per infocon</a>.</li>
<li>check_procurve_loop <a class="reference external" href="http://forum.category5.tv/thread-303.html">as per lee3521</a>.</li>
<li>MSSQL check as per <a class="reference external" href="http://forum.category5.tv/thread-312.html">itsubs&#64;sagroup.co.uk</a>.</li>
<li>check_docker and check_docker_swarm from
<a class="reference external" href="https://github.com/timdaman/check_docker">https://github.com/timdaman/check_docker</a> <a class="reference external" href="https://forum.category5.tv/thread-409-post-2378.html">as per Zerant</a>.</li>
</ul>
<p><strong>New Features</strong></p>
<ul class="simple">
<li><strong>NEMS Cloud Services</strong> - NEMS 1.5 introduces NEMS Cloud Services. By
activating this optional service, your NEMS Linux server will benefit
from off-site backups and notifications should your device stop
responding (See NEMS CheckIn below). Plus, later this year I will be
introducing a web-based tactical view that is accessible from
anywhere, and amalgamates the tactical information of multiple NEMS
servers on your account allowing sysadmins a method of monitoring
multiple sites from one cloud-based dashboard.</li>
<li><strong>NEMS CheckIn</strong> - NEMS 1.5 introduces <a class="reference external" href="../nems-cloud-services/checkin.html">NEMS CheckIn</a>. CheckIn will
notify you by email if your NEMS Linux server becomes unresponsive.
Disabled by default, NEMS CheckIn can be configured within NEMS SST.
This service requires a NEMS Cloud Services account.</li>
<li><strong>Optional TLS</strong> - TLS Secure Authentication can be disabled in NEMS
SST for SMTP email <a class="reference external" href="http://forum.category5.tv/thread-128.html">as requested by luckyworlock</a>.</li>
<li><strong>Graphing</strong> - nagiosgraphs now comes preinstalled <a class="reference external" href="https://forum.category5.tv/thread-236-post-1827.html">as requested by
Erast Fondorin</a>. It is configured and functional in Nagios Core, but
can also be accessed from the NEMS Dashboard <em>Reporting</em> menu.</li>
<li><strong>Webhook Notifications</strong> - NEMS Linux now supports notifications via
webhook as requested by <a class="reference external" href="https://twitter.com/JonBackhaus/status/1075373761543720960">Jon Backhaus</a>. This feature was added to
<a class="reference external" href="/features/nems-tools/warninglight">nems-tools: Warning Light</a>.</li>
<li><strong>Custom Appearance</strong> - NEMS SST now features the ability to change
the background on some NEMS screens.<ul>
<li>Background Selection, allows you to select from the following:<ul>
<li><em>Daily Image (Default)</em> option loads a new image every day.</li>
<li><em>NEMS Legacy</em> shows the classic server room image from NEMS
Linux 1.4.</li>
<li><em>Custom Color</em> allows you to choose a base color to use for the
background.</li>
<li><em>Upload Image</em> allows you to upload your own preferred
wallpaper image.</li>
</ul>
</li>
<li>Blur Background Selection, allows you to add a blur effect to
background images:<ul>
<li><em>Slight Blur</em> will add a subtle Gaussian blur to the background
image.</li>
<li><em>Medium Blur</em> will add a more pronounced blur to the background
image.</li>
<li><em>Heavy Blur</em> will blur the background image so heavily that
only the color scheme of the image is recognizable.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li>WiFi now works on Raspberry Pi devices out of the box <a class="reference external" href="http://forum.category5.tv/thread-280.html">as reported by
the community</a>.</li>
<li><a class="reference external" href="../check_commands/check_sbc_temperature.html">check_sbc_temperature</a> (previously called <em>check_rpi_temperature</em>)
prompts for Warning and Critical temperatures as pointed out by
<a class="reference external" href="http://forum.category5.tv/thread-113-post-920.html">mgl1976</a>.</li>
<li>Fixed Nagios Core <em>Trends</em> and <em>Alert Histogram</em> giving 404 errors as
per <a class="reference external" href="http://forum.category5.tv/thread-265.html">damo</a>.</li>
<li>Fixed <em>Host Detail</em> and <em>Service detail</em> giving 404 error as per
<a class="reference external" href="http://forum.category5.tv/thread-253-post-1523.html#pid1523">ronjtaylor</a>.</li>
<li>There was a <a class="reference external" href="https://bitbucket.org/tildeslash/monit/issues/535/invalid-csrf-token">known issue with Monit 5.20</a> (included in NEMS 1.4.1)
which results in an error “Forbidden: Invalid CSRF Token”. For
Monit’s web interface to work, you must open it in an Incognito
window (the bug is related to cookies). A fix was rolled into NEMS
Linux upstream (as of October 2018). 5.25 is out in source, but not
in Debian repositories. As this bug was fixed, I’m no longer
concerned about the issue, though it will be nice to see 5.25 make
its way into the repos.</li>
<li>DST problem in Nagvis <a class="reference external" href="http://forum.category5.tv/thread-371-post-2175.html">as per ronjohntaylor</a> fixed by system-wide
timezone variables now being set in <em>nems-init</em>.</li>
<li><a class="reference external" href="/check_commands/check_nrpe">check_nrpe</a> is now installed to the correct folder. The upstream
installer places it in the folder for Nagios 3, not Nagios 4.</li>
</ul>
<p><strong>Improved Features</strong></p>
<ul class="simple">
<li>Email notifications are now responsive HTML emails. Please see the
“thanks” section above.</li>
<li>NEMS SST now allows you to disable rolling updates. By doing so, your
deployment will remain as is, allowing you to better control when/if
your NEMS server is updated. As suggested by Dave Harman. Also
supports putting off updates to run once per month, once per week, or
once every two weeks as requested by John Naab.</li>
<li>All check_wmi_plus check commands have been redone to correct the
argument counts and also to provide better descriptions for each arg.
Was suggested by mydogboris.</li>
</ul>
<p><strong>Miscellaneous</strong></p>
<ul class="simple">
<li>samba shares have been improved to support long filenames.</li>
<li>MOTD has been improved. The generally not useful info has been
removed making it a little cleaner looking, and a new ASCII logo has
been integrated.</li>
<li>Removed the old default checks from NEMS host and created new
templates specifically for NEMS that are more appropriate for
low-powered SBCs (super high CPU load thresholds, for example). Some
users were running the sample checks as if they were intended for
production use rather than as a guide, so this should help those
users by not setting off irrelevant alerts such as CPU load or swap
usage on the NEMS server (particularly problematic on low powered
devices like Raspberry Pi, since the default samples are more suited
for monitoring full-powered Linux servers). <a class="reference external" href="http://forum.category5.tv/thread-178-post-2048.html#pid2048">Reported by
experimenter</a>, MarshMan, and others.</li>
<li>NEMS SST now warns you if you try to navigate away before saving
changes.</li>
<li>WMIC is no longer being distributed by OpenVAS, so I have forked the
most current git repo their parent company provided, and am now using
that (after some modifications). New active repository is located at
<a class="reference external" href="https://github.com/Cat5TV/wmic">https://github.com/Cat5TV/wmic</a> and <em>wmic</em> version has been upgraded
from 1.3.14 to 4.0.0.</li>
<li><em>vim</em> is now included by default <a class="reference external" href="http://forum.category5.tv/thread-423.html">as requested by Zerant</a>.</li>
<li><em>webmin</em> has been removed from NEMS Linux. The networking feature
<a class="reference external" href="https://github.com/webmin/webmin/issues/930#issuecomment-445114922">has been broken for quite some time</a>, and waiting for the patches
to arrive upstream has been much too long. Also, Webmin tends to
confuse novice users into thinking their NEMS server is out of date
(due to pending OS updates), and in some rare cases has resulted in
users breaking their configuration. There are no reasons to keep
Webmin, but many to remove it.</li>
</ul>
<p><strong>Rolling Updates 1.5</strong></p>
<p>February 2019</p>
<ul class="simple">
<li>Moved bootscreen to TTY7 and disabled kernel log
output. TTY1 (the previous default) was also receiving syslog
messages, which led to a messy screen. As noted by Bill Marshall.</li>
<li>Raspberry Pi 2/3 Build 1 private Patron release.</li>
<li>ODROID XU4 Build 2 private Patron release. Fixes
WMIC compile issue. Updated versions of PHP, Apache2, and a few other
packages that were updated upstream.</li>
<li>Fixed ownership of <em>nems-www</em>, which was causing
users to be unable to upload custom backgrounds. Reported by Haaku.
Thanks to m9Networks and UltimateBugHunter for assisting.</li>
<li>Fixed environment variables for local libraries
to ensure <em>wmic</em> can find <em>libopenvas_wmiclient.so.1</em>. Also improved
the <em>nems-wmic</em> installation procedure to ensure all files are saved
and persistent. This to mydogboris for testing.</li>
<li>Removed NEMS Linux version number from header of
NEMS Dashboard. As it is already included in the footer, it is
redundant.</li>
<li>Removed Facebook link from NEMS Dashboard (I have
been using it less and less) and changed the YouTube and Twitter
links to point to the new NEMS Linux profiles, rather than my
personal profiles. NEMS has its own now!</li>
<li>ODROID XU4 Build 3 private Patron release. Merges
all rolling updates. Fixes <em>wmic</em>.</li>
<li>Network Manager was using its default setting to
automatically spoof a new MAC address every time wifi connected. On a
Raspberry Pi using WiFi, this would cause a new IP address in the
DHCP pool, and users trying to establish static reservations would
not be able to do so. I over-wrote the default and now the actual
physical MAC address will be used. The patch will future-ready all
other NEMS builds for devices that support WiFi.</li>
<li>Raspberry Pi devices now resize the filesystem on
boot, rather than on init.</li>
<li>Raspberry Pi 2/3 Build 2 private Patron release.
Merges all rolling updates. Re-compiled <em>wmic</em> and applied WiFi
patch. Added US locale out of the box.</li>
<li>Moved Raspberry Pi to stable kernel rather than
latest kernel.</li>
<li>ODROID XU4 Build 3 Public release.</li>
<li>Opened ports 548,5353,5354 in CSF/LFD Firewall to
allow AVAHI / mDNS to function normally, as per issue reported by Jon
Backhaus. Will have no effect on NEMS Linux 1.5 since CSF/LFD are not
yet compatible.</li>
<li>Raspberry Pi 3 Model A+ added. Raspberry Pi Model
B/B+ have been split so the correct board will be reported (B or B+,
not B/B+).</li>
<li><em>nems-update</em> output improved. Formatting
improved, and now includes the before and after git commit IDs.</li>
<li>Fixed NEMS 1.5 using NEMS 1.4 database out of the
box before initialization.</li>
<li>Set default timezone to America/Toronto.</li>
<li>Ensure packages are not upgraded from Sury’s PHP
repository on Raspberry Pi Zero/1 (breaks these builds if otherwise).</li>
<li>Added <em>piwatcher</em> switch to <a class="reference external" href="/commands/nems-info">nems-info</a>.
<a class="reference external" href="https://cat5.tv/piwatcher">piWatcher</a> support is now fully integrated and will automatically
power cycle a Raspberry Pi-based NEMS Linux server if it becomes
unresponsive.</li>
<li>NEMS Linux 1.5 base upgraded to Debian Buster.
This resolves many backport issues on the Raspberry Pi Zero/1 build,
and further upgrades many of the underlying core OS components.</li>
<li>PHP upgraded to 7.3.</li>
<li>CSF/LFD firewall not yet compatible with Debian
Buster. Removed until such time as it is.</li>
<li>Move JavaScript and CSS assets from CDNJS to
<em>nems-www</em>. Users with certain DNS filters were missing components
such as jQuery due to CDNJS being blocked by their DNS provider.</li>
<li>Released Build 3 for Raspberry Pi to Patrons.
This test release merges all Raspberry Pi boards into a single build
and is for testing only (not for production use).</li>
<li>Write a new installer for <em>raspi-config</em> on
Raspberry Pi build. Build 3 failed to install it, so automated
filesystem resize failed on first boot and WiFi settings could not be
configured.</li>
<li>Build 4 for Raspberry Pi released to Patrons.
This is a test build that resizes correctly on first boot and
supports WiFi. However it does not have the check_commands compiled
so is not ready for production use.</li>
<li>Removed <em>nagios-plugins</em> which appears to be a
dead project (still no 2.2.2 after all these years, doesn’t compile
correctly on buster) and moved to <em>monitoring-plugins</em> which is still
active and compiles nicely.</li>
<li>Added Daily Color option to NEMS SST for
background. Each day’s color is extracted automatically from the
color pallet of that day’s daily image.</li>
<li>Activated I2C on Raspberry Pi build to allow
piWatcher compatibility. Added final timers to piWatcher script.</li>
<li>NEMS Linux 1.5 for Raspberry Pi released to
public (Build 6).</li>
<li><em>nems-info ip</em> will now output 127.0.0.1 instead
of NULL if no IP address is found on a network controller. Fixes MOTD
on local logins where a network connection is non-existent.</li>
<li>Patched PHP 7.3 and PHP 7.2 configs to allow
larger background image uploads in NEMS SST.</li>
</ul>
<p>March 2019</p>
<ul class="simple">
<li>NEMS Linux 1.5 Virtual Appliance OVA and VHD Build 1
released to Patrons for early testing.</li>
<li>Connected TV screen improved to include NEMS state
information. Colors softened for normal state, and will turn red in
event of CRITICAL state.</li>
<li>When uploading a custom background image, the default
color is then selected from the upload and applied to the browser
theme. This gives a nice consistency between uploaded image and theme
colors. Note: If then changing to Custom Color, the color will be
selected by default.</li>
<li>Leaving SMTP username blank in NEMS SST now disables
SMTP authentication, as requested by dr_patso on Discord (to
accommodate Office 365 relay).</li>
<li>Treat thermals as floating point instead of string in
thermal logger <a class="reference external" href="http://forum.category5.tv/thread-455.html">as per nix-7</a>.</li>
<li>Forked <em>monitoring-plugins</em> and created new
installer in <em>nems-admin</em> to fix some of the issues with the check
commands.</li>
<li>Rollout a newly compiled version of NEMS WMIC to
systems who are missing it. This update takes a long time and so will
lead to a new build for all platforms.</li>
<li>Added support for MS Teams webhooks <a class="reference external" href="http://forum.category5.tv/thread-460.html">as per
stealth81</a>.</li>
<li>Added support for Slack webhooks.</li>
<li>Install PostgreSQL development libraries for
check_psql and OpenSSL, and recompile all Nagios plugins. Fixes
errors in NEMS check commands. PATCH-000001 - requires running <em>sudo
nems-upgrade</em></li>
<li>Bumped check_speedtest-cli.sh to v1.3 and disabled
pre-allocation of memory. This fixes “MemoryError” on lesser boards
such as the Raspberry Pi Zero. New version will get installed along
with PATCH-000001.</li>
<li>Added Running/Idle status of NEMS Update and NEMS
Fixes to connected TV screen.</li>
<li>Make NEMS branding persistent in Cockpit after an
update.</li>
<li>Cleaned up some bloat in NEMS Migrator’s data for
NEMS 1.5 (backup copies of the MySQL database).</li>
<li>Connected TV display now reports if the filesystem
is still being resized on first boot. NEMS Quickfix now waits 90
seconds from boot to begin (in case filesystem is being resized).
PATCH-000002</li>
<li>Added <em>glances</em> to NEMS 1.5 <a class="reference external" href="https://forum.category5.tv/thread-358.html">as per RSABear</a>.</li>
<li>Switch network interface management to
NetworkManager, enabling static IP configuration within the Cockpit
interface. PATCH-000003</li>
<li>Raspberry Pi Build 7 released. This introduces the
new networking system to Raspberry Pi users, as well as the improved
check commands and better performance on lesser boards.</li>
<li>Added CPU temperature to connected TV display. Also
fixed a math error which fixes the connected TV’s ability to show if
a new version of NEMS is available.</li>
<li>PINE64 A64/A64+ Build 1 released to Patrons. In
addition to everything that NEMS Linux 1.5 is, this build introduces
a new kernel which addresses a known issue exists that was previously
affecting &lt;em&gt;some&lt;/em&gt; A64+ boards. If affected, the system clock
would jump 99 years into the future—which subsequently impacted many
of the NEMS services.</li>
<li>PINE64 Rock64 Build 1 released to Patrons.</li>
<li>If sysbench is not available, do not try to run
benchmarks.</li>
<li>Notate PATCH-000002 on Rock64 boards retroactively
since the Build 1 version of the file resize script does not log the
success.</li>
<li>Added <em>rootdev</em> and <em>rootpart</em> to <a class="reference external" href="/commands/nems-info">nems-info</a>.</li>
<li>New img build workflow created, including new <a class="reference external" href="https://baldnerd.com/sbc-build-base/">Base
Images</a>. Theoretically img files should be a bit smaller here
forward (due to zerofill) and should be more consistent (less chance
for corrupt build img files).</li>
<li>After <a class="reference external" href="https://github.com/akopytov/sysbench/issues/297">reporting</a> <em>sysbench</em> missing Buster
binaries to the developer, it was added. Integrated the Buster
installation into NEMS Benchmark since the Debian repositories are
thus far also missing the package. System will check upstream first,
and if not available, will install from developer repository.</li>
<li>PINE64 A64/A64+ Build 1 released to public.</li>
<li>PINE64 Rock64 Build 2 released to patrons and
public. Fixes bad image creation of Build 1 causing it not to boot.
Also integrates PATCH-000002.</li>
<li><em>nems-quickfix</em> (and therefore a reboot) now removes
NEMS NConf generator lock file if it exists. It can get left behind
in certain circumstances, which would cause NConf to say “Someone
else is already generating the configuration.”</li>
<li>PATCH-000002 now gets automatically logged to all
boards if the main partition is sized greater than 9 GB. This ensures
platforms such as the virtual appliance and the Rock64 transition to
a ready state if the patch is not logged already but the partition is
indeed resized.</li>
<li>If sysbench is not found in the developer’s
repository, remove the repository and update apt before cancelling
the benchmark. See <a class="reference external" href="https://github.com/akopytov/sysbench/issues/298">Issue 298</a>.</li>
<li>Added <em>speedtest</em> to <a class="reference external" href="/commands/nems-info">nems-info</a>.</li>
<li>NEMS will now automatically detect the nearest
Internet speedtest server and use it by default. May be overridden by
ARG if option changed in NEMS SST.</li>
<li>Added <em>rootfulldev</em> to <a class="reference external" href="/commands/nems-info">nems-info</a>.</li>
<li>Improved thermal detection for cross-device
compatibility. Also updated <em>nems-info temperature</em> to output
realtime thermal data rather than 15 minutes log.</li>
<li>Added <em>fileage</em> to <a class="reference external" href="/commands/nems-info">nems-info</a>.</li>
<li>Improved connected TV screen to now show how long
updates/fixes have been running.</li>
<li><a class="reference external" href="/commands/nems-info">nems-info</a> <em>hosts</em> &amp; <em>services</em> were showing one
more than actual true count. This was due to a previous update to the
livestatus socket which results in it outputting a header line, which
was being counted as a result. Simply subtracted 1 to counteract. As
reported by UltimateBugHunter.</li>
<li>PINE64 A64-LTS/SOPine Build 1 patron pre-release.</li>
<li>Retroactively enable rc.local service on boards
where it is not enabled by default (eg., Rock64). Thanks to
UltimateBugHunter for putting me onto the problem, having noticed the
connected TV was going to sleep after 10 minutes (even though
rc.local was set to disable TV sleeping).</li>
<li>Fixed issue with temperature output on connected TV
which would cause math errors when converting from Celsius to
Fahrenheit.</li>
<li>ODROID-N2 Build 1 released to patrons.</li>
</ul>
<p>April 2019</p>
<ul class="simple">
<li>NanoPi M4 Build 1 released to patrons.</li>
<li>PINE64 A64-LTS Build 1 released to public.</li>
<li>Change the warning message if NEMS can’t connect to
github, as pointed out by ITManLT.</li>
<li>ODROID-XU4 Build 4 released. Keeping in mind the XU4
platform was the first public release of NEMS 1.5, this is a
significant upgrade. This moves XU4 from Stretch to Buster and adds
all the new check command scripts, as well as all updates that have
been released since the first NEMS Linux 1.5 release.</li>
<li>Virtual Appliance Build 2 (OVA, VHD, QCOW2) released
to Patrons. This build was developed on an ESXi development laptop
donated by bhammy187. Build 2 should be much easier to import into
any hypervisor, making it significantly more portable than Build 1.</li>
<li>Added error handling to thermal sensor check to
report UNKNOWN if the sensor doesn’t exist, as would be the case with
a Virtual Appliance.</li>
<li>New universal filesystem resizer automatically
detects the root partition and resizes it. Will continue to adapt to
eventually deprecate the separate resizer scripts for each platform.</li>
<li>Add error handling to nems_sendmail_host and
nems_sendmail_service to accommodate inability to write to Nagios log
if user runs <em>nems-mailtest</em> as a non-root user. As reported by
ITManLT.</li>
<li>Fix issue where disabling SMTP TLS in NEMS SST would
always revert to enabled. Reported by ITManLT and confirmed by
UltimateBugHunter-NitPicker.</li>
<li>ASUS Tinker Board / S Build 1 released to Patrons.</li>
<li>ODROID-C2 Build 1 released to patrons.</li>
<li>ODROID-N2 Build 1 and ODROID-C2 Build 1 released to
public.</li>
<li>RockPro64 Build 1 released to public.</li>
<li>Minor verbiage adjustment re. Speedtest Server in
NEMS SST.</li>
<li>Compile sysbench if not exist, improve compatibility
with various versions (ie., detect which switches are accepted for
cli variables).</li>
<li>Fix spelling of Orange Pi (DietPi had spelled it
OrangePi).</li>
<li>NEMS Linux 1.5 Build 1 for NanoPi M4 and Orange Pi
Zero released to public.</li>
<li>Update weekly benchmark to save transient data in a
secure tmp folder.</li>
<li>Re-order events in weekly benchmark to ensure the
compiler runs even if a benchmark is not scheduled (so the needed
software is ready to go).</li>
<li>Lay groundwork to add 7zip benchmarks to weekly
benchmark.</li>
</ul>
<p>May 2019</p>
<ul class="simple">
<li>NEMS Linux 1.5 Build 1 for NanoPi NEO Plus2 released to
Patrons.</li>
<li>Add distinction between 512 MB and 1 GB version of the
NanoPi NEO Plus2.</li>
<li>Added 7zip benchmark to weekly benchmarks.</li>
<li>Fixed glitch in NanoPi NEO Plus2 hardware ID generator
and blocked null HWID’s after detecting that one Virtual Appliance
user had booted a VM with no MAC address.</li>
<li>Make weekly benchmark data readable by all, but only
writable by root.</li>
<li>Add <em>benchmark 7z</em> option to <em>nems-info</em>.</li>
<li>Change <em>nems-info online</em> to use wget instead of ping.
As pointed out by ITManLT, some networks block ping, causing NEMS to
think it has no Internet connectivity (and therefore updates do not
run).</li>
<li>Monitorix now loads all graphs dynamically, and
displays all available graphs (not just the ones I manually selected
back in NEMS 1.2).</li>
<li>Fix PHP notice for undefined variable when manually
running a <em>nems-benchmark</em>.</li>
<li>Finish moving <em>nems-benchmark</em> over to 7-Zip benchmarks
rather than sysbench, and completely remove sysbench from the normal
benchmark process. It will be re-added later as a supplement, but
will not be used for NEMS scoring.</li>
<li>If any of the sysbench benchmarks don’t exist, output a
0 instead of a error in <em>nems-info</em>.</li>
<li>Roll out a patch that removes some of the residual
Armbian settings from early base images. /var/log was being loaded
into zram instead of stored on disk, resulting in /var/log becoming
full. This patch fixes that and ensures log files are stored on disk.
Only affects early releases (such as Build 1 for TinkerBoard and
NanoPi M4). Pointed out <a class="reference external" href="http://forum.category5.tv/thread-508-post-2779.html">by Marshman</a>.</li>
<li>NEMS Linux 1.5 Build 2 for Tinker Board / S released to
public.</li>
<li>NEMS Linux 1.5 Build 2 for ODROID-N2 released,
integrating <a class="reference external" href="https://forum.odroid.com/viewtopic.php?f=179&amp;t=33865#p253001">Meverics’ patch</a> which resolves the networking /
slowness / inability to boot issues found on some ODROID-N2 boards.
Big thanks to UltimateBugHunter-NitPicker for initially reporting
this issue.</li>
<li>NEMS Linux 1.5 Virtual Appliance (OVA) Build 3
released. This build reduces the ESXi Virtual Hardware Version from
14 to 7, meaning NEMS Linux may now be deployed on older versions of
ESXi. No need to re-release VMDK or QCOW2 for Build 3 since the
update only affects OVA.</li>
</ul>
<p>June 2019</p>
<ul class="simple">
<li>Removed unneeded virtual hardware from OVA appliance.</li>
<li>Restructure the Virtual Appliance OVA for
compatibility with ESXi 5.5+.</li>
<li>NEMS Linux 1.5 Virtual Appliance (OVA) Build 4
released. This build resolves the error “The OVF package is invalid
and cannot be deployed” on older versions of ESXi. The cause of the
issue was because older versions do not support the SHA256 hashing
algorithm. Build 4 is identical to Build 3 in every way except the
Cryptographic Hash Algorithm has been switched from SHA256 to SHA1,
making it compatible with older ESXi servers.</li>
<li>Upgraded speedtest from 1.0.6 to 2.1.1.</li>
<li>Added initial Raspberry Pi 4 support.</li>
<li>Change the way various Raspberry Pi models are
displayed. Eg., <em>Raspberry Pi 3</em> now, instead of previous <em>Raspberry
Pi 3 Model B</em>. <em>Raspberry Pi 3 B+</em> now instead of previous <em>Raspberry
Pi 3 Model B+</em>.</li>
<li>Raspberry Pi Build 8 released. Introduces
out-of-the-box support for Raspberry Pi 4 and includes all patches
that were issued since Build 7 was released 3 months ago.</li>
<li>Raspberry Pi boards were previously reported as ‘RPi’
by the hardware description script. I didn’t like this, so I changed
it. Where a board previously listed itself as ‘RPi 3 B+’ it will now
say ‘Raspberry Pi 3 B+’, for example.</li>
<li>Moved <em>monit</em> to custom build rather than pulling
from apt repository. Package is missing from some Debian Buster
builds. This also ensures we have the latest version at time of
build.</li>
</ul>
<p>July 2019</p>
<ul class="simple">
<li>Added new command <em>nems-install</em> which will install
NEMS Linux on eMMC on the Khadas VIM3. In future versions, it may be
expanded to support other boards if required.</li>
<li>Khadas VIM3 Build 1 released to Patrons.</li>
<li>Buster is now stable. Update releaseinfo, and do this
automatically in future.</li>
<li>Remove check_speedtest’s reliance on a server ID.
Latest version supports automatic detection on launch, and will
automatically roll to next available server in line if server fails
to respond. Much better than single point of failure, which has been
causing false notifications the past few days. Thanks to mydogboris
for reporting this.</li>
<li>A patch to enable disabled rc.local that was
previously released had been broken due to a renamed build script.
Fixed.</li>
<li>NEMS SST now features a tab “TV Dashboard”. Password
setting for NEMS TV Dashboard has been moved to this tab (was
previously under <em>Optional Services</em>), and two new features have been
added: 24 hour clock formatting, ability to display faults
immediately rather than waiting for the service to enter a
notification state. Some users were confused by the default, so this
allows them to change when they are notified.</li>
<li>In NEMS SST, move NEMS Migrator to the NEMS Cloud
Services tab.</li>
<li>Begin encrypting NEMS State data with personal
encryption/decryption password for NEMS Cloud Services users in
preparation for the coming NEMS Cloud Services Dashboard.</li>
<li>NEMS Cloud Services master NEMS Server login
complete.</li>
<li>NEMS Cloud Services now receives NEMS GPIO Extender
data from subscribed devices. This will allow NEMS Warning Light or
GPIO Extender Clients to be placed anywhere in the world, and will
also allow a single NEMS Warning Light to display the state of
multiple NEMS Servers.</li>
<li>NEMS Cloud Services Dashboard now displays the master
NEMS Server alias, CheckIn setting and Host/Service state.</li>
<li>NEMS Cloud Services Dashboard now updates the state
data automatically. This was a bit more complex than a standard ajax
call due to the encrypted state of the data.</li>
<li>Added tooltips to Host/Service icon on NEMS Cloud
Services Dashboard which shows the count of each state.</li>
<li>Added <em>nems-info</em><strong>cloudauthcache</strong> option which
loads the current NEMS Cloud Services authorization status from cache
rather than a live connection (significantly faster for quick
checks).</li>
<li>NEMS Cloud Services Dashboard has been added to the
“Reporting” menu on all NEMS servers which are connected to the
service.</li>
<li>Added NEMS Platform and Version to NEMS Cloud
Services Dashboard.</li>
<li>Added credential error handling to NEMS Cloud
Services parent server login. Now, an easy to understand error
message will be given if you enter invalid credentials, rather than
just receiving a blank page.</li>
<li>Moved NEMS TV Dashboards’ livestatus connector to a
new folder “connectors” to pave the way for new dashboard connectors.</li>
<li>NEMS TV Dashboard has been removed from <em>nems-www</em>
and is now its own repository called <em>nems-tv</em>. This is to allow me
to add NEMS TV Dashboard to NEMS Cloud Services without needing to
build a second (redundant) version. It also means NEMS Cloud
Services’ version will exactly mirror the features of the local copy.</li>
<li>Add <em>livestatus</em> to <a class="reference external" href="/commands/nems-info">nems-info</a>.</li>
<li>Add check to ensure <em>nems-tv</em> is enabled, and if not,
enable it. Thanks to ITmanLT for pointing out the issue.</li>
<li>NEMS TV Dashboard added to <a class="reference external" href="/features/nems-cloud">NEMS Cloud Services</a>.</li>
<li>Improve the output of the clock on NEMS TV Dashboard.</li>
<li>Sync NEMS TV Dashboard’s local clock setting to NEMS
Cloud Services. Now the clock output format will match your local
settings (ie., 12/24h format, whether to show am/pm).</li>
<li>NEMS TV Dashboard in NEMS Cloud Services now shows
the alias of the reporting NEMS Server. This is in preparation for
the coming reconciliation of multiple connected NEMS Servers on a
single NCS TV Dashboard.</li>
<li>Added support for <a class="reference external" href="/hardware/temper">TEMPer</a> hardware.</li>
<li>Added exit codes to check_temper.</li>
</ul>
<p>August 2019</p>
<ul class="simple">
<li>Added UNKNOWN state to check_temper. If TEMPer
device is disconnected, will now report UNKNOWN instead of 0°.</li>
<li><em>check_temper</em> now detects automatically whether the
user is entering their ARG temperatures in C or F and acts
accordingly.</li>
<li>Major rework of NRPE. NEMS Linux no longer uses the
package maintainer’s version of NRPE. A new installer has also been
provided for Debian hosts to ease the deployment process. Please see
<a class="reference external" href="/check_commands/check_nrpe">Check Commands: check_nrpe</a> which details what is required.</li>
<li>Added <a class="reference external" href="/check_commands/custom_check_mem">custom_check_mem</a> checkcommand and
corresponding NRPE advanced service, called <em>Check Memory NRPE</em>.</li>
<li><a class="reference external" href="/usage/notify-host-by-telegram">Telegram notification configuration</a> has been
made more clear in <a class="reference external" href="/config/nems_sst">NEMS SST</a>, and the documentation has been
rewritten to match.</li>
<li><a class="reference external" href="/usage/notify-host-by-telegram">Telegram notification script</a> reworked to remove
the ‘g’ from Chat ID automatically, making it a bit easier to
understand input.</li>
<li>Fixed error on NEMS Cloud Services Dashboard where
the tooltip() function was not loaded before it was called.</li>
<li>Begin building a means of NEMS Cloud Services’ TV
Dashboard to detect and display if the NEMS Server is not online (via
NEMS CheckIn). Also, the server list will now highlight down NEMS
Servers red.</li>
<li>NEMS Migrator Restore now breaks apart the
checkcommands file from the NEMS backup and attempts to import each
command individually. This has the effect of skipping (Aborting)
import of checkcommands that already exist in the default NEMS NConf
database while allowing the user-created checkcommands to be
imported. Thanks to Jon Backhaus for pointing out the issue.</li>
<li>NEMS TV Dashboard has a setting in NEMS SST that
allows you to change the notifications to immediately display, rather
than honoring the notifications settings in NEMS NConf. This setting
now also impacts the results of <em>nems-info</em><strong>state</strong> and NEMS Cloud
Services’ TV Dashboard.</li>
<li>Added <em>nems-info</em><strong>state all</strong> Output the state
information of all NEMS hosts and services to JSON format, regardless
of state.</li>
<li>NEMS Server State Report added to NEMS Cloud
Services. Now you can see the state of all your hosts/services
directly from the NEMS Cloud Services Dashboard.</li>
<li>NEMS Linux 1.5 AMI Build 1 for Amazon Web Services
released.</li>
</ul>
<p>September 2019</p>
<ul class="simple">
<li>The development version of NEMS Linux for the
ODROID-C1+ was losing its heartbeat following filesystem resize, so I
got looking deeper at the ODROID resize stage scripts. In doing so, I
found a typo in the *start* variable creation of stage1 which
resulted in the first partition starting at the first sector of the
disk rather than the needed sector 8192 on the ODROID-C1+. This bug
has been fixed, and the ODROID-C1+ development build is working.</li>
<li>NEMS Linux 1.5 for ODROID-C0/C1/C1+ Build 1
released.</li>
<li>Added <em>nems-info</em><strong>frequency</strong> to display the
<em>current</em> CPU operating frequency.</li>
<li>In <em>nems-init</em> the <em>mysqld</em> daemon is forcibly
killed if stopping fails (as it tends to do on Docker). This in turn
causes an error on platforms where systemd is able to stop the
process: can’t kill a task that isn’t running. Add a check to see if
<em>mysqld</em> is running before attempting to kill it.</li>
<li><a class="reference external" href="/usage/notify-host-by-telegram">Push Notifications Using Telegram</a> now includes
an emoji to help distinguish the state.</li>
<li>Improve <em>nems-fs-resize</em> to support drives that
are not mmcblk0 type. Now, the script can be used to resize the
Virtual Appliance disk, for example.</li>
<li>Re-order the output of Telegram notifications to
make them easier to see critical information at a glance. Now, the
NEMS Server’s alias and the timestamp are listed first, followed by
the notification information.</li>
<li>Check for the existence of rc.local before
patching it in nems-update fixes. This is in particular for Docker
(which doesn’t use rc.local) to prevent [harmless] errors during
update.</li>
<li>Add SCSI dev assignment detection to
<em>nems-info</em><strong>rootfulldev</strong><em>/</em><strong>rootpart</strong><em>/</em><strong>rootdev</strong>.
This fixes the feature on non-MMC storage platforms, such as the
Virtual Appliance.</li>
<li>Fixed a previously unnoticed bug in Telegram
<em>service</em> notifications where the Service output was displaying the
datestamp rather than the output.</li>
<li>Added rich-text markdown to Telegram host and
service notifications. Now, the layout looks really good (not just
plain text).</li>
<li>Added <a class="reference external" href="/usage/vendor_branding">NEMS Linux Vendor Branding</a>. Now, you can
add your own logo to the NEMS Dashboard.</li>
<li>Added the vendor logo (if applicable) to the init
screen.</li>
<li>Remove Raspberry Pi logo from boot screen.</li>
<li>NEMS Linux 1.5 Build 2 for ODROID-C2 released.</li>
<li>Updated migrator databases include the
recommended settings for <a class="reference external" href="/hardware/temper">check_temper</a> and <a class="reference external" href="/check_commands/custom_check_mem">custom_check_mem</a>, no
longer requiring users to manually add them on new deployments.</li>
<li>Version increased to 1.5.1. No further builds of
1.5 will be created.</li>
<li>Add <em>nems-info</em><strong>perfdata_cutoff</strong> which shows
the cutoff (in days) for perfdata retention.</li>
<li>NEMS SST now has a “Maintenance” section
featuring a perfdata cleanup schedule. This allows users to select to
remove old perfdata to avoid a bloated perfdata.log file. As
requested by rkadmin, whose file had reached 15GB in size. By
default, this feature is disabled and perfdata is kept indefinitely
if enabled in NEMS NConf.</li>
<li>NEMS Cloud Services will now re-route you to the
Dashboard if you have an active session. Active sessions will remain
active for 24 hours. As <a class="reference external" href="https://twitter.com/premium3722/status/1171308803960266752">requested by Premium</a>.</li>
<li>Removed the perfdata tweaks as they only bandaid
the more crucial problem: a misconfigured Nagios conf. Will later add
a feature to tweak nagios.cfg settings, but for now those who choose
to hack their cfg files directly will probably break things.</li>
<li>NEMS Linux 1.5.1 Build 1 for Raspberry Pi went
into private testing.</li>
<li>NEMS Cloud Services sessions now remain active
for 7 days, allowing you to open NEMS Cloud Services features in your
browser without needing to login (until you click Logout).</li>
<li><em>nems-info</em><strong>frequency</strong> now reports the
average frequency across all cores, rather than the frequency of the
first core. Thanks to Bo from ameriDroid for pointing out this
inconsistency.</li>
<li>The build process now clears bash history
correctly so on first boot, users don’t have the development history.</li>
<li>NEMS Linux 1.5.1 Build 1 for ODROID-C2 went into
private testing.</li>
<li>NEMS Migrator Off Site Backup calendar data had
no error handling, so if the server didn’t respond during the daily
check-in, the data would still be overwritten, but with invalid JSON
data. Added a JSON parser to detect if the server’s response is valid
JSON before clobbering the data file.</li>
<li>Fix the name of ODROID-C2.</li>
<li>NEMS Linux 1.5.1 for Raspberry Pi and ODROID-C2
released.</li>
<li>NEMS Linux 1.5.1 for ODROID-XU4 released.</li>
</ul>
<p>October 2019</p>
<ul class="simple">
<li><em>nems-info</em><strong>nic</strong> and <em>nems-info</em><strong>online</strong>
now use nemslinux.com instead of google.com for their tests. Also,
results are cached for one minute, reducing the number of requests
while still remaining accurate to the minute. As requested by Joerg
Hoffmann.</li>
</ul>
<p>November 2019</p>
<ul class="simple">
<li>Removed smooth scrolling from <em>nems-www</em> as it
causes jerky behavior in modern versions of Chrome, resulting in
console error, “Unable to preventDefault inside passive event
listener due to target being treated as passive.”</li>
<li>Account for the fact that some users may have
passwords in their password when restoring from a NEMS Migrator
backup set. Before now, a password in the password would result in a
null password.</li>
</ul>
<p>December 2019</p>
<ul class="simple">
<li>The current NEMS version is now platform
independent, meaning an ODROID-XU4 won’t report a new version just
because a new version was released for Raspberry Pi (for example). As
per <a class="reference external" href="https://github.com/Cat5TV/nems-migrator/issues/1">Issue 1</a> on NEMS Migrator.</li>
<li>Define the platform distinction in NEMS Server
Overview with regards to currently available version. Reduce calls to
api by 1/3 (performance improvement) for Platform Name.</li>
<li>If user is already a Patron, remove the “Become a
Patron” button.</li>
</ul>
<p>January 2020</p>
<ul class="simple">
<li>PixelSlayer Bob pointed out that 9590 was missing
from monit on NEMS 1.5.1. Investigated and it turns out the monit
service installers were patched into NEMS Linux during 1.4, but never
moved to the 1.5 branch. Fixed.</li>
<li>If a user has the “NEMS is not initialized” page
open in their browser and completes a nems-init process, the browser
will now automatically redirect to the NEMS Dashboard.</li>
</ul>
<p>February 2020</p>
<ul class="simple">
<li>Upgraded 1.5 branch to check_temper from 1.6
branch and improved thresholds for detection of C vs F temperatures.
This brings in a few of the important check_temper fixes and
improvements from NEMS 1.6 to users of NEMS Linux 1.5. Thanks to
<em>tripled</em> for pointing out the issue with certain temperature
thresholds.</li>
<li>Fix footer on NEMS TV Dashboard so it doesn’t
jump up after 60 seconds due to the speedtest update that was added
for 1.6. Reported by ITManLT.</li>
</ul>
<p>April 2020</p>
<ul class="simple">
<li>Add <em>www-data</em> to the forbidden usernames list. Fix
nems-info so www-data user doesn’t attempt to create a NEMS cache
folder.</li>
<li><em>nems-init</em> now asks if you’d like to proceed if it
detects your NEMS Server is already initialized.</li>
<li>Improve the verbosity of error messages when
restoring a NEMS Migrator Off Site Backup.</li>
</ul>
<p>May 2020</p>
<ul class="simple">
<li>Significant overhaul of the NRPE installer to improve
compatibility with client systems (especially Ubuntu / Linux Mint).
Deals with <a class="reference external" href="https://github.com/Cat5TV/nems-admin/issues/3">Issue 3</a> plus other undocumented issues.</li>
<li>Migrated Nagios misc data folder to 1.6 branch in
nems-migrator.</li>
<li>Create and enable (and document) check_cpu_temp in
<a class="reference external" href="/check_commands/check_nrpe">Check Commands: check_nrpe</a> which allows monitoring remote system
CPU temperatures using lm-sensors on the remote host. A feature
request by <em>tripled</em>.</li>
<li>Add Sysfs thermal data to <em>check_cpu_temp</em> if
available, and fallback on it if <em>lm-sensors</em> isn’t installed. Add
unknown state if thermal data cannot be obtained by either of these
two methods.</li>
<li>Fixed the apt update which occurred during a NEMS
Update task: On Raspberry Pi it requires –allow-releaseinfo-change,
but this was breaking the update on some other platforms. So only use
this argument on RPi-based NEMS Servers.</li>
<li>Add the apt key signature for the sury repository,
which hosts PHP for some earlier builds of NEMS Linux.</li>
<li>Released NagiosTV (called NEMS Tactical Overview on
NEMS Linux) in advance to NEMS Linux 1.5 users. It was originally
slated to wait until the NEMS Linux 1.6 release, but that is being
held up by Adagios at the moment, so I thought it would be nice to
push out a little gift to the users as thanks for their patience.</li>
<li>Upgraded NagiosTV to 0.5.3. Adapt CSS overrides to
allow use of NEMS wallpaper and other stylistic enhancements.</li>
<li>Security improvement: Moved several nems-scripts
temporary shell scripts out of /tmp.</li>
<li>Ensure check commands are replaced should NRPE upgrade
be run on a NEMS Server.</li>
<li>Create Credit Roll Easter Egg.</li>
<li>Improve the audio timing and add layout of Credit Roll
Easter Egg.</li>
<li>Add IP Address to all screens of bootscreen.</li>
<li>Several NEMS NConf improvements / fixes (not
retroactive on already initialized NEMS Servers). Examples: Add
<em>check_temper_temp</em> and <em>check_temper_hum</em> temperature and humidity
checks, fix <em>custom_check_mem</em>.</li>
<li>Change sample SBC CPU temperature service check to
recent NRPE version and move to Advanced Services to improve
understanding for users and make it easier to apply the service to
other hosts.</li>
<li>Add <em>Room Temperature</em> and <em>Room Humidity</em> sample
services to NEMS Server. If user has a <a class="reference external" href="/hardware/temper">TEMPer</a> device connected,
results will be provided.</li>
<li>Create udisks2 modules directory to prevent deceptive
“error” in Cockpit logs. As reported by UltimateBugHunter-NitPicker
and listed in <a class="reference external" href="https://github.com/cockpit-project/cockpit/issues/12412">Cockpit Issue 12412</a>.</li>
</ul>
<p>June 2020</p>
<ul class="simple">
<li>NEMS Linux 1.5.2 released for Raspberry Pi. Brings
together all updates and patches since 1.5.1, and adds support for
the new 8GB Raspberry Pi 4 Model B. Thanks to
UltimateBugHunter-NitPicker for beta testing the initial build for me
as my 8GB Raspberry Pi has still not arrived here in Canada.</li>
<li>NEMS Linux for Docker moved to 1.5.2 branch to
expedite release.</li>
<li>Grant non-root access to TEMPer devices on USB after a
reboot, and periodically.</li>
<li>Make text darker in NEMS SST.</li>
<li>Add error handling in case either the thermal or
humidity sensor are not detected on a TEMPer device (as is the case
with a unit which only has one or the other, for example). As
reported by JonBackhaus.</li>
<li>Upgrade NagVis to 1.9.20, which resolves an issue with
user creation as pointed out by jnrhome. Pushed out through daily
patches to all NEMS Servers.</li>
<li>Pipe error output from temper.py to null so it doesn’t
interfere with the response of the script when TEMPer is not getting
enough power.</li>
<li>Fix incorrect NConf fk_id_item assignment for NEMS
host in <a class="reference external" href="/commands/nems-restore">NEMS Migrator Restore</a>. This was causing the host-preset’s
check-alive to be assigned incorrectly. Now, generating the Nagios
config will work fine after <em>nems-restore</em>. Big thanks to
UltimateBugHunter-NitPicker not only for bringing the issue to my
attention, but for granting me remote access to his NEMS Server to
allow me to replicate and ultimately fix this.</li>
<li>Install WMIC and the insert script for NagiosGraph
which were missing in 1.5.2 and any systems which ran the recent NRPE
upgrade. As pointed out by UltimateBugHunter-NitPicker.</li>
<li>Add watchdog daemon and safe shutdown on smart UPS
battery depleted for <a class="reference external" href="/hardware/pivoyager">PiVoyager</a> pHat.</li>
<li>Add Multi Router Traffic Grapher (MRTG) <a class="reference external" href="https://forum.nemslinux.com/viewtopic.php?f=10&amp;t=408&amp;p=2373">as requested
by mydogboris</a>.</li>
<li>Add logging to <em>nems-quickfix</em> in case it appears
hung. Log can be tailed at /var/log/nems/nems-quickfix.log</li>
<li>Added logrotate <a class="reference external" href="https://forum.nemslinux.com/viewtopic.php?f=38&amp;t=719">as per baggins</a>.</li>
<li>Improve handling of database initialization.</li>
<li>Do not attempt to configure non-existent SSH service
on Docker when initializing.</li>
<li>Change <em>nems-update</em> to only attempt installation of
SURY GPG key if it is missing (was expired on some older NEMS Servers
as it appears they’re only valid for 2 years). Current key expires
March 2021.</li>
<li>PiVoyager now active on all NEMS Servers (will not do
anything if hardware doesn’t exist).</li>
<li>Abort benchmark if watchdog (PiVoyager or PiWatcher)
are connected. The high load of the benchmark can cause the system to
appear unresponsive for some time, resulting in the watchdog
believing the board to be hung, which would cause the watchdog to
power-cycle the NEMS Server.</li>
<li>mrtg.sh will now detect the [first] default gateway of
the current connection and offer it as the IP to use for MRTG. If
incorrect, user may still enter the router IP manually.</li>
<li>If no SNMP data is found on the router, mrtg.sh will
provide a proper error rather than a “file not found” error.</li>
<li>Add DEB/RPM detection when installing NRPE on Linux
host system. Rudimentary setup of RPM installation in place. Many
things still don’t work on RPM-based hosts, but it’s a great start,
and <a class="reference external" href="https://github.com/Cat5TV/nems-admin/blob/master/build/047-nrpe">047-nrpe</a> will not attempt to run apt-get on CentOS anymore.</li>
<li>If, when user runs mrtg.sh, the MRTG Apache
configuration is not enabled, enable it automatically.</li>
<li>Added <em>mrtgsetup</em> command (a symlink to mrtg.sh).</li>
<li>Added custom trap community support to mrtgsetup.</li>
<li>Added MRTG index to <a class="reference external" href="https://nems.local/mrtg">https://nems.local/mrtg</a></li>
<li>Improved NEMS Migrator admin component to separate
1.5 and 1.6 databases in preparation for 1.5.2 compatibility and
inevitable move to 1.6.</li>
<li>Remove git postBuffer (created by nems-admin during
nems-push procedure) upon nems-update.</li>
<li>Stash a change in NEMS Migrator which halted updates
to Migrator on 1.5.2 (fixes several issues related to this, including
TEMPer, and ability to update NEMS Migrator). Automatically patches
all 1.5.2 systems.</li>
<li>Add cronjob to automatically set USB permission every
minute if device connected. This makes it so users no longer have to
reboot after plugging in a TEMPer sensor. Now, it will work
automatically after no more than 60 seconds.</li>
</ul>
<p>July 2020</p>
<ul class="simple">
<li>NEMS Migrator has been moved to its own tab in NEMS
SST. It was previously included on the NEMS Cloud Services page,
which is inappropriate since it can be run locally.</li>
<li>NEMS CheckIn Notifications now tell you how long the
server was down for upon recovery.</li>
<li>Fixed <em>nems-www</em>’s wallpaper.php to only try to load
NEMS-specific functions if running on a NEMS Server. Was causing log
flood on NEMS’ public web site.</li>
<li>Corrected redundant verbiage on NEMS CheckIn emails.
“Has been down for 15 minutes <em>minutes</em>.” Not sure how that never got
noticed before. 😊</li>
<li>New command: <em>nems-passwd</em> allows changing the NEMS
Server admin account password without having to re-initialize NEMS
Linux. As requested by geek-dom and JJ Dubya J.</li>
<li>If TEMPer is connected but lacks a dev assignment,
abort loop. This can occur if the pass-through on a Virtual Machine
is botched. Removing the virtual device and re-connecting it should
fix, but until that time, we don’t want the script to hang.</li>
</ul>
<p>August 2020</p>
<ul class="simple">
<li>NEMS Linux now stores a file <em>NEMS_SERVER.txt</em> in
the Windows-readable section of your NEMS storage medium (eg., SD
card) which contains some information about your NEMS Server (NEMS
Version, Platform, HWID, Alias). This will make it easier for users
to determine which board a SD card came out of should they need to,
<a class="reference external" href="https://forum.nemslinux.com/viewtopic.php?f=10&amp;t=566">as per Marshman</a>, by simply plugging the card into their computer.</li>
<li>Added JSON output switch to <a class="reference external" href="/usage/nems-mailtest">nems-mailtest</a> and
<em>nems_sendmail_service</em> in preparation for integration with NEMS SST.</li>
<li>NEMS Linux 1.5.2 for PINE64 A64/A64+ released as
per <a class="reference external" href="https://forum.nemslinux.com/viewtopic.php?f=38&amp;t=743">this thread</a>.</li>
<li>Migrate all system emails (ie., NEMS CheckIn, Forum
Notifications, etc.) to Amazon SES and enable DKIM. Maximize
reliability of notification emails from NEMS Cloud Services and
reduce being falsely identified as spam.</li>
<li>Add color to the warning label when user tries to
initialize a NEMS Server that has already been initialized (to make
it stand out better).</li>
</ul>
<p>September 2020</p>
<ul class="simple">
<li>Make 500-temper not log to cur file, which was
causing uninitialized NEMS Servers to say ‘compiling’ rather than
‘not initialized’.</li>
<li>Sync all files from user’s home folder when
initializing or re-initializing. While this obviously prevents any
accidental data loss, this is particularly to ensure SSH key trust
relationships are not lost if a user re-initializes a NEMS Server on
AWS.</li>
<li>Yay community! We surpassed 100 YouTube
subscribers on the NEMS Linux channel, so that means we qualify for a
vanity URL. I updated <em>nems-www</em> footer link to reflect this change.</li>
<li>Adjust webhook notifications to recognize
Discord’s change in URL for webhooks. Old URLs contained
discordapp.com as the domain. New ones are at discord.com, so NEMS
was rejecting them for an invalid domain name. Thanks to <a class="reference external" href="https://discord.com/channels/501816361706717184/501816361706717186/752976026241466530">Amheus for
bringing this to my attention</a>.</li>
<li>Omzlo Warninglights pHAT support enabled.</li>
<li>Enabled the watchdog feature of the Omzlo
Warninglights pHAT.</li>
</ul>
<p>October 2020</p>
<ul class="simple">
<li>Add external sensor support to TEMPer checks, and
set as default. If an external sensor exists, it will be used. If
not, the internal sensor will be used. Also added output
<em>temp_location</em> and <em>hum_location</em> to <em>nems-info temper</em> to show
which sensor is being used. As <a class="reference external" href="https://discord.com/channels/501816361706717184/501816361706717186/763075014035505214">pointed out by Toasteh_</a>.</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="1.6.html" title="previous chapter">NEMS Linux 1.6 Changelogs</a></li>
      <li>Next: <a href="1.2.html" title="next chapter">NEMS Linux 1.2 Changelog</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/changelogs/1.5.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Category5 TV Network.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../_sources/changelogs/1.5.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>