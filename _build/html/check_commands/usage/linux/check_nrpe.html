
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Monitor Linux Hosts with NRPE &#8212; NEMS Linux Documentation 1.6 documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Upgrade NEMS Linux to Newer Version" href="../../../advanced/nemsupgrade.html" />
    <link rel="prev" title="Monitoring Linux Hosts with NEMS Linux" href="index.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="monitor-linux-hosts-with-nrpe">
<h1>Monitor Linux Hosts with NRPE<a class="headerlink" href="#monitor-linux-hosts-with-nrpe" title="Permalink to this headline">¶</a></h1>
<p>The Nagios Remote Plugin Executor (NRPE) allows your Nagios Enterprise
Monitoring Server to communicate with the Linux machines on your server
to determine things like free disk space, CPU load, and detect possible
issues that a simple ping can’t determine.</p>
<p>There are countless instructions online to download tar.gz files and
install manually, or use a PPA to install via apt-get, but NEMS includes
a helpful installer that will configure everything for you.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not install the NRPE plugin via software repositories as
these are abandoned and lack some important functionality.</p>
</div>
<p>To install the needed NRPE client on Debian / Ubuntu / other
Debian-based Linux operating systems (as root):</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">O</span> <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Cat5TV</span><span class="o">/</span><span class="n">nems</span><span class="o">-</span><span class="n">admin</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="mi">047</span><span class="o">-</span><span class="n">nrpe</span> <span class="o">|</span> <span class="n">bash</span>
</pre></div>
</div>
<p><strong>Please note:</strong> Rudimentary support for RPM-based distros is included,
but may not work. Please consider RPM support as experimental, and
report your findings (especially your solutions or pull requests) so I
can improve it.</p>
<p>Next, we just have to tell NRPE that it’s allowed to communicate with
our Nagios server. On the client system, open the file
<em>/usr/local/nagios/etc/nrpe.cfg</em></p>
<p>Find the line that reads: <code class="docutils literal"><span class="pre">allowed_hosts=127.0.0.1,::1</span></code></p>
<p>Now there are a few ways we can allow our server. First (and most
obvious) is to add its IP address like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">allowed_hosts</span><span class="o">=</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,::</span><span class="mi">1</span><span class="p">,</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.5</span>
</pre></div>
</div>
<p>Where 192.168.0.5 is our Nagios/NEMS server.</p>
<p>Alternatively we can tell NRPE that it’s allowed to communicate with any
local system:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">allowed_hosts</span><span class="o">=</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,::</span><span class="mi">1</span><span class="p">,</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span>
</pre></div>
</div>
<p>Now, save the file and restart NRPE as follows:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">restart</span> <span class="n">nrpe</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you have a software firewall running on
your Linux machine, setup an exception for your NEMS server IP to gain
access through TCP ports 5666 and 12489.</p>
</div>
<p>And there we have it! Your NEMS Server can now check your Linux machine
at a deeper level using <a class="reference external" href="../../check_nrpe.html">check_nrpe</a>.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Monitoring Linux Hosts with NEMS Linux</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Monitoring Linux Hosts with NEMS Linux</a></li>
      <li>Next: <a href="../../../advanced/nemsupgrade.html" title="next chapter">Upgrade NEMS Linux to Newer Version</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/check_commands/usage/linux/check_nrpe.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Category5 TV Network.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../../../_sources/check_commands/usage/linux/check_nrpe.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>