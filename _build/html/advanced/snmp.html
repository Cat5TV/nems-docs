
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SNMP &#8212; NEMS Linux Documentation 1.6 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Multi Router Traffic Grapher (MRTG)" href="mrtg.html" />
    <link rel="prev" title="NEMS Migrator: Upgrade NEMS 1.0 or nagiospi to latest NEMS" href="legacyupgrade.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="snmp">
<h1>SNMP<a class="headerlink" href="#snmp" title="Permalink to this headline">¶</a></h1>
<p>The Simple Network Management Protocol (SNMP) allows you to collect and monitor information about your SNMP enabled device.  This protocol was created as a way to gather information from various systems and equipment in a uniform manner.</p>
<div class="section" id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>The SNMP hierarchy consists of multiple tables called Management Information Bases (MIBs).  MIBs can follow universal standards (i.e. RFC 1441-see links below for more information) or vendor defined.  Each MIB consists of one or more nodes which can represent an individual device or device component.  Each node has a unique Object Identifier (OID).  SNMP monitoring works by the monitoring host (in this case, NEMS) connects to the SNMP agent on the remote device.
Version.</p>
<p>There are currently three version of the SNMP protocol (1v, c2v, and 3v).  It is up to the device manufacturer which one is implemented.</p>
<p><strong>Community</strong></p>
<p>This is the security method SNMP.  The basic types of communities are read-only (normally public), read-write (defined in the deice configuration), and trap (also defined in configuration).  Each community has a name defined in the device configuration.</p>
<p><strong>Presteps</strong></p>
<p>Ensure that the device to be monitored is SNMP capable and SNMP is configured.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/snmp_001.png"><img alt="../_images/snmp_001.png" src="../_images/snmp_001.png" style="width: 600px;" /></a>
</div>
</div>
<div class="section" id="mib-oid">
<h2>MIB/OID<a class="headerlink" href="#mib-oid" title="Permalink to this headline">¶</a></h2>
<p>Vendor sites and community forums may provide the MIBs and OIDs, but there are ways of retrieving information from the device itself.</p>
<p><strong>Method 1 - MIB Browser</strong></p>
<p>There are several free MIB browsers available on the internet. Most provide a tree structure of the device.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/snmp_002.png"><img alt="../_images/snmp_002.png" src="../_images/snmp_002.png" style="width: 600px;" /></a>
</div>
<p><strong>Method 2 - snmpwalk</strong></p>
<p>snmpwalk will connect to the remote device and retrieve a list of OIDs.  Open a NEMS ssh session.</p>
<p>The command format is</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">snmpwalk -v *snmp version* -c *snmp community* *IP*</span>
</pre></div>
</div>
<p>A list of OIDs will be returned.  Copy the results to a text document or spreadsheet for easy reference.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/snmp_003.png"><img alt="../_images/snmp_003.png" src="../_images/snmp_003.png" style="width: 600px;" /></a>
</div>
</div>
<div class="section" id="testing-with-check-snmp">
<h2>Testing with ./check_snmp<a class="headerlink" href="#testing-with-check-snmp" title="Permalink to this headline">¶</a></h2>
<p>From the NEMS ssh session, navigate to /usr/local/nagios/libexec.  The command is check_snmp and the options are:</p>
<p>Usage:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">check_snmp -H &lt;ip_address&gt; -o  [-w warn_range] [-c crit_range]</span>
<span class="go">[-C community] [-s string] [-r regex] [-R regexi] [-t timeout] [-e retries]</span>
<span class="go">[-l label] [-u units] [-p port-number] [-d delimiter] [-D output-delimiter]</span>
<span class="go">[-m miblist] [-P snmp version] [-N context] [-L seclevel] [-U secname]</span>
<span class="go">[-a authproto] [-A authpasswd] [-x privproto] [-X privpasswd] [-4|6]</span>
</pre></div>
</div>
<p>In this example, uptime will be test using both the OID and Object name using the command format:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">*./checksnmp -H remote ip -c SNMP community -o OID or Object*</span>
</pre></div>
</div>
<p>In this example, System Uptime is check using both the OID and the Object name.  Note, the .0 is put on the end of sysUpTime, this denotes to collect child information and is required.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/snmp_004.png"><img alt="../_images/snmp_004.png" src="../_images/snmp_004.png" style="width: 600px;" /></a>
</div>
<p>Both work and return the same information.  Depending on the device and which MIB it uses (standard or vendor) will dictate which one is used.</p>
</div>
<div class="section" id="nems-check">
<h2>NEMS Check<a class="headerlink" href="#nems-check" title="Permalink to this headline">¶</a></h2>
<p>Follow these steps to configure a basic SNMP check.</p>
<ul class="simple">
<li>Launch NEMS Configurator (NConf)</li>
<li>Click on Add for Advanced Services</li>
<li>Enter most fields according to environment standards (i.e. name, description, check/notifications periods, etc)</li>
<li>Select check_snmp in the check command field</li>
<li>For ARG1 at the bottom of the screen, at the minimum, enter the community and object to check. <em>-c public -o iso.3.6.1.2.1.1.3.0</em>  You can add warnings <em>-w</em> and criticals <em>-c</em> if the appropriate</li>
<li>Add new check to host</li>
<li>Generate and deploy Nagios config</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/snmp_005.png"><img alt="../_images/snmp_005.png" src="../_images/snmp_005.png" style="width: 600px;" /></a>
</div>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../_images/snmp_006.png"><img alt="../_images/snmp_006.png" src="../_images/snmp_006.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">Note the service parameters.</span></p>
</div>
<p>Launch Adagios and validate the check ran with no issues.</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../_images/snmp_007.png"><img alt="../_images/snmp_007.png" src="../_images/snmp_007.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">Adagios shows our SNMP check is running perfectly.</span></p>
</div>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://www.rfc-editor.org/">https://www.rfc-editor.org/</a></li>
<li><a class="reference external" href="http://www.oid-info.com/index.htm">http://www.oid-info.com/index.htm</a></li>
<li><a class="reference external" href="http://www.ireasoning.com/mibbrowser.shtml">http://www.ireasoning.com/mibbrowser.shtml</a></li>
<li><a class="reference external" href="http://www.oidview.com/mibs/detail.html">http://www.oidview.com/mibs/detail.html</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SNMP</a><ul>
<li><a class="reference internal" href="#basics">Basics</a></li>
<li><a class="reference internal" href="#mib-oid">MIB/OID</a></li>
<li><a class="reference internal" href="#testing-with-check-snmp">Testing with ./check_snmp</a></li>
<li><a class="reference internal" href="#nems-check">NEMS Check</a></li>
<li><a class="reference internal" href="#links">Links</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="legacyupgrade.html" title="previous chapter">NEMS Migrator: Upgrade NEMS 1.0 or nagiospi to latest NEMS</a></li>
      <li>Next: <a href="mrtg.html" title="next chapter">Multi Router Traffic Grapher (MRTG)</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/advanced/snmp.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Category5 TV Network.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../_sources/advanced/snmp.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>