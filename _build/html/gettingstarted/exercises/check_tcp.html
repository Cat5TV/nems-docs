
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Monitor A Non-Standard Port with check_tcp &#8212; NEMS Linux Documentation 1.6 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Available Platforms" href="../../basic/platforms.html" />
    <link rel="prev" title="Monitor Your Web Site with check_http" href="check_http.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="monitor-a-non-standard-port-with-check-tcp">
<h1>Monitor A Non-Standard Port with check_tcp<a class="headerlink" href="#monitor-a-non-standard-port-with-check-tcp" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercise-introduction">
<h2>Exercise Introduction<a class="headerlink" href="#exercise-introduction" title="Permalink to this headline">¶</a></h2>
<p>In this exercise you will learn to monitor the state of any TCP/UDP port on a network connected device, and notify yourself if it stops responding. Some quick examples are to tell if your local blockchain node has stopped responding on port 8333, Apache2 has stopped responding on port 443, or even monitor the state of openssh-server running on port 22. The options are limitless.</p>
<p>NEMS Linux includes a dummy port listener running on port 9590. The port listener is cleverly called <a class="reference external" href="../../basic/9590.html">9590</a>, and does nothing other than reply that it is up. This can be used to simulate a port on another device. While you can create a check for any port on any host, let’s start with using this dummy port just to become familiar with how NEMS Linux works.</p>
<p><strong>Our goal:</strong> To setup a service monitor on the NEMS host which warns us if port 9590 ever goes offline.</p>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>On the left menu of NConf, you’ll see “Services”. Click “Add”.</li>
<li>Set the Service Name to: <em>9590</em></li>
<li>Leave Service Enabled set to: <em>Yes</em></li>
<li>Set the Check Command to: <em>check_tcp</em></li>
<li>Set Assigned to Host to: <em>NEMS</em> (this host comes pre-installed)</li>
<li>Leave Check Period set to: <em>24×7</em></li>
<li>Set Notification Period to: <em>24x7</em></li>
<li>Leave Service Templates as is, none selected.</li>
<li>Under Contact Groups highlight the ‘admins’ group and press the arrow pointed right to move it to Selected Items.</li>
<li>Leave Notes, Notes URL and Action URL blank.</li>
<li>Set Max Check Attempts to: <em>30</em></li>
<li>Set Check Interval to: <em>1</em></li>
<li>Set Retry Interval to: <em>1</em></li>
<li>Set First Notification Delay to: <em>5</em></li>
<li>Set Notification Interval to: <em>15</em></li>
<li>Set Notification Options to: <em>w,u,c,r,f,s</em></li>
<li>Leave Active Checking, Passive Checking, Notification Enabled, Check Freshness and Freshness Threshold blank.</li>
<li>Leave Assign Service to servicegroup as is, none selected.</li>
<li>Set Params for check command to the port number: <em>9590</em></li>
<li>Press <strong>Submit</strong></li>
<li>Generate your config.</li>
</ol>
</div>
<div class="section" id="testing-your-check-command">
<h2>Testing Your Check Command<a class="headerlink" href="#testing-your-check-command" title="Permalink to this headline">¶</a></h2>
<p>Once the new config is running, try failing the service by opening <em>Monit Service Manager</em> under <em>System</em> on the NEMS Dashboard. Click on the Process named 9590, and then click “Stop service”. You’ll notice in around 1 minute the status of 9590 will show as a problem in all status views (E.G., NEMS TV Dashboard, NEMS Adagios, Nagios Core), and after roughly 5 minutes you will receive a notification (assuming your notifications settings are configured).</p>
<p>Once you have received a notification, visit NEMS Adagios to Acknowledge the outage, and observe how that impacts your host and service state.</p>
<p>Then, return to Monit, open the 9590 Process, and click “Enable Monitoring”. This will re-load 9590 and you’ll soon see it change to a “Recovered” state.</p>
</div>
<div class="section" id="real-world-use">
<h2>Real World Use<a class="headerlink" href="#real-world-use" title="Permalink to this headline">¶</a></h2>
<p>Once complete, try setting up a new service to monitor a real host on your network. Simply change the name of the service to something appropriate, the host in step 5 (you already know how to add new hosts if you don’t already have it configured), and the port number in step 19.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Monitor A Non-Standard Port with check_tcp</a><ul>
<li><a class="reference internal" href="#exercise-introduction">Exercise Introduction</a></li>
<li><a class="reference internal" href="#steps">Steps</a></li>
<li><a class="reference internal" href="#testing-your-check-command">Testing Your Check Command</a></li>
<li><a class="reference internal" href="#real-world-use">Real World Use</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">NEMS Linux Getting Started Guide</a><ul>
  <li><a href="../exercises.html">Beginner Exercises</a><ul>
      <li>Previous: <a href="check_http.html" title="previous chapter">Monitor Your Web Site with check_http</a></li>
      <li>Next: <a href="../../basic/platforms.html" title="next chapter">Available Platforms</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/gettingstarted/exercises/check_tcp.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Category5 TV Network.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../../_sources/gettingstarted/exercises/check_tcp.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>